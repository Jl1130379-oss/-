<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æ±Ÿå®¶æ™ºæ…§åŸå¸‚ | Admin Control 3.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --neon-blue: #00f2fe; --neon-pink: #ff00de; --gold: #ffd700; --panel: rgba(6, 12, 32, 0.98); }
        * { box-sizing: border-box; font-family: "PingFang TC", sans-serif; cursor: crosshair; }
        body, html { margin: 0; padding: 0; height: 100%; background: #000; color: #fff; overflow: hidden; }
        #master-bg { position: fixed; inset: 0; background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1542332213-9b5a5a3fad35?w=1920'); background-size: cover; z-index: -2; }
        .hud-frame { position: fixed; inset: 15px; border: 2px solid var(--neon-blue); border-radius: 40px; box-shadow: 0 0 20px var(--neon-blue), inset 0 0 20px var(--neon-blue); pointer-events: none; z-index: 1000; }
        #main-nav { position: fixed; left: 45px; top: 120px; display: flex; flex-direction: column; gap: 20px; z-index: 1100; }
        .nav-orb { width: 70px; height: 70px; border-radius: 20px; background: var(--panel); border: 1px solid var(--neon-blue); display: flex; align-items: center; justify-content: center; font-size: 26px; color: var(--neon-blue); transition: 0.4s; cursor: pointer; }
        .nav-orb.active { background: var(--neon-blue); color: #000; box-shadow: 0 0 30px var(--neon-blue); }
        .viewport { position: fixed; left: 145px; right: 50px; top: 90px; bottom: 50px; background: var(--panel); border-radius: 35px; border: 1px solid rgba(0,242,254,0.3); display: none; padding: 40px; overflow-y: auto; backdrop-filter: blur(30px); }
        
        /* é›£åº¦åˆ‡æ›ä¸­æ§å° */
        .difficulty-selector { display: flex; gap: 15px; margin: 20px 0; }
        .diff-btn { padding: 10px 20px; border: 1px solid var(--neon-blue); background: transparent; color: var(--neon-blue); border-radius: 10px; cursor: pointer; transition: 0.3s; }
        .diff-btn.active { background: var(--neon-blue); color: #000; font-weight: bold; }

        .teacher-box { display: flex; gap: 30px; margin-top: 20px; }
        .sprite { width: 300px; height: 450px; border: 2px solid var(--neon-blue); border-radius: 25px; background-size: cover; background-position: center; position: relative; }
        .sprite-name { position: absolute; bottom: 20px; width: 100%; text-align: center; font-weight: 900; background: rgba(0,0,0,0.7); padding: 10px 0; }
        
        .chat-area { height: 350px; overflow-y: auto; background: rgba(0,0,0,0.4); padding: 20px; border-radius: 20px; display: flex; flex-direction: column; gap: 10px; border: 1px solid rgba(255,255,255,0.05); }
        .msg { max-width: 80%; padding: 12px 18px; border-radius: 15px; }
        .msg.teacher { background: rgba(0,242,254,0.1); border-left: 4px solid var(--neon-blue); align-self: flex-start; }
        .msg.user { background: rgba(255,255,255,0.05); align-self: flex-end; }

        .shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .shop-item { background: rgba(255,255,255,0.03); padding: 20px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.05); text-align: center; }
        #admin-snow { position: fixed; bottom: 35px; right: 35px; font-size: 45px; color: var(--neon-blue); cursor: pointer; z-index: 2000; }
    </style>
</head>
<body onload="bootSystem()">

<div id="master-bg"></div>
<div class="hud-frame"></div>
<div id="admin-snow" onclick="adminLogin()"><i class="fas fa-snowflake"></i></div>

<div style="position:fixed; top:40px; right:75px; z-index:1100; display:flex; gap:30px;">
    <div style="background:var(--panel); border:1px solid var(--neon-blue); padding:12px 30px; border-radius:50px; box-shadow: 0 0 15px var(--neon-blue);">
        <i class="fas fa-bolt" style="color:var(--neon-blue)"></i> <span id="val-sta">10</span>
        <span style="margin:0 15px; opacity:0.3">|</span>
        <i class="fas fa-coins" style="color:var(--gold)"></i> <span id="val-coin">0</span>
    </div>
</div>

<div id="main-nav">
    <div class="nav-orb active" id="nav-lobby" onclick="show('lobby')"><i class="fas fa-home"></i></div>
    <div class="nav-orb" id="nav-study" onclick="show('study')"><i class="fas fa-brain"></i></div>
    <div class="nav-orb" id="nav-chat" onclick="show('chat')"><i class="fas fa-heart"></i></div>
    <div class="nav-orb" id="nav-shop" onclick="show('shop')"><i class="fas fa-store"></i></div>
</div>

<div id="view-lobby" class="viewport">
    <h1 style="color:var(--neon-blue); letter-spacing:8px;">æ±Ÿå®¶æ§åˆ¶å¤§å»³ | LOBBY</h1>
    <div class="teacher-box">
        <div class="sprite" style="background-image:url('https://api.dicebear.com/7.x/adventurer/svg?seed=Ling&hairColor=2c1b18')">
            <div class="sprite-name">æ±Ÿéˆ´ (æµå‹•æ¥µå…‰è£™)</div>
        </div>
        <div class="sprite" style="background-image:url('https://api.dicebear.com/7.x/adventurer/svg?seed=Yi&hairColor=402020')">
            <div class="sprite-name">æ±Ÿä¾ (è½æ«»ç¹½ç´›æ¼¢æœ)</div>
        </div>
        <div style="flex:1; background:rgba(255,255,255,0.03); border-radius:25px; padding:25px; border:1px solid rgba(0,242,254,0.1);">
            <h3 style="color:var(--gold); margin-top:0;">è‡ªè¨‚ä»Šæ—¥èª²ç¨‹é›£åº¦</h3>
            <div class="difficulty-selector">
                <button class="diff-btn active" id="btn-elem" onclick="setDiff('åœ‹å°')">åœ‹å° (3åˆ†é˜)</button>
                <button class="diff-btn" id="btn-univ" onclick="setDiff('å¤§å­¸')">å¤§å­¸ (ç„¡é™æ™‚)</button>
                <button class="diff-btn" id="btn-comp" onclick="setDiff('ç«¶è³½')">ç«¶è³½ (ç„¡é™æ™‚)</button>
            </div>
            <p id="diff-status" style="color:var(--neon-blue)">ç›®å‰è¨­å®šï¼šåœ‹å°èª²ç¨‹æ¨¡å¼</p>
            <hr style="border:0; border-top:1px solid rgba(255,255,255,0.1); margin:15px 0;">
            <p>é»æ“Šé›ªèŠ±é©—è­‰ç®¡ç†å“¡èº«ä»½ä»¥åŒæ­¥æ˜ç‡ˆã€‚</p>
        </div>
    </div>
</div>

<div id="view-study" class="viewport">
    <h1 id="q-lvl" style="color:var(--neon-blue)"></h1>
    <div id="timer-wrap" style="color:var(--neon-pink); font-weight:bold; font-size:1.2rem; margin:10px 0;"></div>
    <div style="background:rgba(255,255,255,0.05); padding:40px; border-radius:30px; border:1px solid var(--neon-blue);">
        <h2 id="q-text" style="font-size:1.8rem;">æ­£åœ¨åŠ è¼‰é¡Œç›®...</h2>
        <div id="q-options" style="display:grid; gap:15px; margin-top:30px;"></div>
    </div>
</div>

<div id="view-chat" class="viewport">
    <h1 style="color:var(--neon-blue)">å¸«ç”Ÿç§äººç¾¤èŠ</h1>
    <div id="chat-disp" class="chat-area"></div>
    <div style="margin-top:20px; display:flex; gap:10px;">
        <input type="text" id="chat-in" style="flex:1; background:transparent; border:1px solid var(--neon-blue); padding:15px; border-radius:12px; color:#fff;" placeholder="å›è¦†è€å¸«...">
        <button onclick="sendChat()" style="background:var(--neon-blue); border:none; padding:15px 30px; border-radius:12px; color:#000; font-weight:bold; cursor:pointer;">ç™¼é€</button>
    </div>
</div>

<div id="view-shop" class="viewport">
    <h1 style="color:var(--neon-blue)">è¬ç‰©ç²¾å“å•†å ´</h1>
    <div class="shop-grid" id="shop-box"></div>
</div>

<script>
    let state = { coin: 0, sta: 10, currentDiff: 'åœ‹å°', adminClaimed: false };
    let timer;

    function bootSystem() { show('lobby'); updateUI(); addChat("æ±Ÿéˆ´", "æ±Ÿç®¡ç†å“¡ï¼Œå¤§å»³å·²è§£é–ã€‚è«‹å…ˆé¸æ“‡ä»Šæ—¥é›£åº¦ã€‚"); }

    function setDiff(d) {
        state.currentDiff = d;
        document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active'));
        if(d === 'åœ‹å°') document.getElementById('btn-elem').classList.add('active');
        if(d === 'å¤§å­¸') document.getElementById('btn-univ').classList.add('active');
        if(d === 'ç«¶è³½') document.getElementById('btn-comp').classList.add('active');
        document.getElementById('diff-status').innerText = `ç›®å‰è¨­å®šï¼š${d}èª²ç¨‹æ¨¡å¼`;
        addChat("æ±Ÿéˆ´", `å·²åˆ‡æ›è‡³ ${d} é›£åº¦ã€‚æº–å‚™å¥½å¾Œè«‹å‰å¾€èª²ç¨‹ã€‚`);
    }

    function show(id) {
        document.querySelectorAll('.viewport').forEach(v => v.style.display = 'none');
        document.querySelectorAll('.nav-orb').forEach(n => n.classList.remove('active'));
        document.getElementById('view-' + id).style.display = 'block';
        document.getElementById('nav-' + id).classList.add('active');
        if(id === 'shop') renderShop();
        if(id === 'study') nextQuiz();
    }

    // é¡Œç›®åº«
    const db = {
        'åœ‹å°': [{t:'ã€Œä¸‰æ›´ç‡ˆç«äº”æ›´é›ã€çš„ä¸‹ä¸€å¥æ˜¯ï¼Ÿ', o:['æ­£æ˜¯ç”·å…’è®€æ›¸æ™‚','å°‘å£¯ä¸åŠªåŠ›','å­¸è€Œä¸æ€å‰‡ç½”'], a:0, s:180}],
        'å¤§å­¸': [{t:'é—œæ–¼é‡å­åŠ›å­¸ä¸­çš„ã€Œç³¾çºæ…‹ã€ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ', o:['ç¬æ™‚å‚³éè³‡è¨Šä¸”ä¸å—ç©ºé–“é™åˆ¶','åƒ…åœ¨å®è§€ä¸–ç•Œç™¼ç”Ÿ','èˆ‡é›»å­è³ªé‡ç„¡é—œ'], a:0, s:0}],
        'ç«¶è³½': [{t:'ã€ç«¶è³½ã€‘åœ¨ M-ç†è«–ä¸­ï¼Œç¬¬ 11 ç¶­åº¦æ˜¯é€éä»€éº¼å ´å¼•å…¥çš„ï¼Ÿ', o:['è¶…å¼•åŠ›å ´','å¼·ä½œç”¨åŠ›å ´','å¸Œæ ¼æ–¯å ´'], a:0, s:0}]
    };

    function nextQuiz() {
        clearInterval(timer);
        const q = db[state.currentDiff][0]; // æ ¹æ“šè‡ªè¨‚é›£åº¦æŠ“é¡Œ
        document.getElementById('q-lvl').innerText = `${state.currentDiff} é›£åº¦èª²ç¨‹`;
        document.getElementById('q-text').innerText = q.t;
        document.getElementById('q-options').innerHTML = q.o.map((o,i) => `<button onclick="ans(${i===q.a})" style="padding:20px; background:rgba(255,255,255,0.05); border:1px solid var(--neon-blue); color:#fff; border-radius:10px; cursor:pointer; text-align:left;">${o}</button>`).join('');
        
        if(q.s > 0) startClock(q.s);
        else document.getElementById('timer-wrap').innerText = "æ€è€ƒæ™‚é–“ï¼šâˆ (å¤§å­¸/ç«¶è³½æ¨¡å¼)";
    }

    function startClock(s) {
        let r = s;
        timer = setInterval(() => {
            r--;
            document.getElementById('timer-wrap').innerText = `å‰©é¤˜æ™‚é–“ï¼š${Math.floor(r/60)}:${(r%60).toString().padStart(2,'0')}`;
            if(r <= 0) { clearInterval(timer); ans(false); }
        }, 1000);
    }

    function ans(c) {
        if(c) { state.coin += 500; alert("æ­£ç¢ºï¼ç²å¾— 500 æ˜ç‡ˆã€‚"); addChat("æ±Ÿä¾", "çœŸä¸æ„§æ˜¯æ±Ÿå®¶ç®¡ç†å“¡ï¼"); }
        else { state.sta -= 2; alert("è§£æå¤±æ•—ï¼Œé«”åŠ›æ‰£é™¤ 2ã€‚"); }
        updateUI(); nextQuiz();
    }

    function renderShop() {
        const box = document.getElementById('shop-box');
        let html = "";
        for(let i=1; i<=20; i++) {
            html += `<div class="shop-item">ğŸ <h4>æ±Ÿå®¶æ”¶è— #${i}</h4><p style="color:var(--neon-blue)">ğŸ® 100</p><button onclick="buy()" style="background:var(--neon-blue); border:none; border-radius:5px; padding:5px 10px; cursor:pointer;">è³¼è²·</button></div>`;
        }
        box.innerHTML = html;
    }

    function buy() {
        if(state.coin >= 100) { state.coin -= 100; updateUI(); alert("åŒæ­¥è³¼è²·æˆåŠŸï¼"); }
        else alert("æ˜ç‡ˆä¸è¶³ï¼");
    }

    function adminLogin() {
        if(state.adminClaimed) return alert("èº«ä»½å·²é–å®šã€‚");
        if(prompt("è«‹è¼¸å…¥ç®¡ç†å“¡è­˜åˆ¥ï¼š") === "æ±Ÿæ†¶å©·") {
            state.coin += 10000; state.adminClaimed = true; updateUI();
            addChat("æ±Ÿéˆ´", "ç®¡ç†å“¡ï¼Œ10000 æ˜ç‡ˆå·²åŒæ­¥ï¼Œç³»çµ±å…¨é–‹ã€‚");
        }
    }

    function addChat(s, t) {
        const d = document.getElementById('chat-disp');
        const div = document.createElement('div');
        div.className = s === "å¦³" ? "msg user" : "msg teacher";
        div.innerHTML = `<strong>${s}:</strong> ${t}`;
        d.appendChild(div);
        d.scrollTop = d.scrollHeight;
    }

    function sendChat() {
        const i = document.getElementById('chat-in');
        if(!i.value) return;
        addChat("å¦³", i.value);
        const v = i.value; i.value = "";
        setTimeout(() => {
            if(v.includes("é›£åº¦")) addChat("æ±Ÿéˆ´", "æ‚¨å¯ä»¥éš¨æ™‚åœ¨å¤§å»³è‡ªè¨‚ä»Šæ—¥é›£åº¦å–”ã€‚");
            else addChat("æ±Ÿä¾", "æ”¶åˆ°äº†ï¼Œæˆ‘å€‘æ­£çœ‹è‘—æ‚¨çš„é€²åº¦å‘¢ï¼");
        }, 800);
    }

    function updateUI() {
        document.getElementById('val-sta').innerText = state.sta;
        document.getElementById('val-coin').innerText = state.coin;
    }
</script>
</body>
</html>
