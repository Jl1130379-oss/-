<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <link rel="manifest" href="https://progressier.app/hdNgeSvaaxo6Nzua0edF/progressier.json"/>
    <script defer src="https://progressier.app/hdNgeSvaaxo6Nzua0edF/script.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#010206">
    <link rel="apple-touch-icon" href="IMG_4392.jpeg">

    <title>æ±Ÿå®¶æ™ºæ…§åŸå¸‚ | å®Œæ•´ PWA ç‰ˆ</title>
    <style>
        :root { --blue: #00f2fe; --pink: #ff00de; --gold: #ffd700; --bg: #010206; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'PingFang TC', sans-serif; overflow: hidden; }
        .viewport { width: 100vw; height: 100vh; display: flex; flex-direction: column; position: relative; }
        
        /* é ‚éƒ¨æ•¸æ“šç‹€æ…‹ */
        .hud { display: flex; justify-content: space-between; padding: 25px 40px; background: rgba(0,0,0,0.7); border-bottom: 2px solid var(--blue); }
        .stat-box { font-size: 1.2rem; font-weight: bold; text-shadow: 0 0 10px var(--blue); }

        /* å°å¸«èˆå° */
        .stage { display: flex; justify-content: center; align-items: center; gap: 80px; flex: 1; }
        .char-pod { text-align: center; cursor: pointer; transition: 0.5s ease; width: 220px; }
        .avatar { 
            width: 200px; height: 200px; border-radius: 50%; border: 4px solid var(--blue);
            background-size: cover; background-position: center; box-shadow: 0 0 30px rgba(0, 242, 254, 0.3); margin-bottom: 10px;
        }
        
        /* å¼·åˆ¶é–å®šï¼šä¸­é€”ä¸å¯æ›èª² */
        .locked { filter: grayscale(1) brightness(0.2) blur(2px); opacity: 0.3; pointer-events: none; transform: scale(0.9); }

        /* æ™ºæ…§äº¤äº’é¢æ¿ */
        .panel {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 900px; background: rgba(5, 12, 30, 0.98);
            border: 2px solid var(--gold); border-radius: 35px; padding: 35px;
            display: none; z-index: 2000; box-shadow: 0 0 60px #000;
        }
        .timer-ui { float: right; font-size: 2.2rem; color: var(--pink); font-family: 'Courier New', monospace; }
        .btn { padding: 12px 30px; border-radius: 50px; border: 1px solid var(--blue); background: transparent; color: #fff; cursor: pointer; font-weight: bold; margin: 8px; transition: 0.3s; }
        .btn:hover { background: var(--blue); color: #000; box-shadow: 0 0 15px var(--blue); }
        .opt-btn { width: 100%; text-align: left; margin: 8px 0; background: rgba(255,255,255,0.05); }

        .diff-selector { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 20px; }
    </style>
</head>
<body>

<div class="viewport">
    <div class="hud">
        <div class="stat-box" style="color:var(--gold)">ğŸ® æ˜ç‡ˆ: <span id="coin-ui">0</span></div>
        <div id="status-tag">ğŸ›ï¸ åŸå¸‚å¤§å»³ - è«‹é»æ“Šè‡ªå‹•åŠ é¡Œ</div>
        <div class="stat-box" style="color:var(--pink)">â¤ï¸ HP: <span id="hp-ui">100</span></div>
    </div>

    <div class="stage">
        <div class="char-pod" id="pod-ling" onclick="handleTeacher('ling')">
            <div class="avatar" style="background-image: url('IMG_4392.jpeg');"></div>
            <h3 style="color:var(--blue)">æ±Ÿéˆ´ (ç†ç§‘)</h3>
            <div style="font-size:0.8rem; color:var(--gold)">ğŸ‘— æµå‹•æ¥µå…‰è£™</div>
        </div>
        <div class="char-pod" id="pod-yi" onclick="handleTeacher('yi')">
            <div class="avatar" style="background-image: url('IMG_3812.jpeg'); border-color:var(--pink)"></div>
            <h3 style="color:var(--pink)">æ±Ÿä¾ (æ–‡ç§‘)</h3>
            <div style="font-size:0.8rem; color:var(--gold)">ğŸ‘˜ è½æ«»ç¹½ç´›æ¼¢æœ</div>
        </div>
    </div>

    <div class="panel" id="main-panel">
        <div id="timer-ui" class="timer-ui"></div>
        <h2 id="panel-title" style="color:var(--gold)"></h2>
        <div id="panel-text" style="font-size: 1.15rem; line-height: 1.8; margin-bottom: 20px;"></div>
        <div id="diff-grid" class="diff-selector"></div>
        <div id="options-area"></div>
        <div id="footer-ctrl" style="text-align:center;"></div>
    </div>

    <div style="text-align:center; padding-bottom: 40px;">
        <button id="add-course-btn" class="btn" style="border-color:var(--gold); color:var(--gold)" onclick="autoLoad()">âš¡ è‡ªå‹•åŠ é¡Œ (ç·šä¸Šç²å–)</button>
        <button class="btn" onclick="exchange()">å‹•ä½œæ¼”åŒ– (æ‰£5000)</button>
    </div>
</div>

<script>
    let state = { coin: 0, hp: 100, mode: 'idle', level: '', teacher: '', currentTopic: null, timer: null };

    // çœŸå¯¦äº”éšé¡Œåº« (éƒ¨åˆ†ç¤ºä¾‹ï¼Œå¯ä¾æ­¤æ ¼å¼æ“´å……)
    const DATA_BANK = [
        { topic: "é‡å­ç³¾çº", levels: {
            'åœ‹å°': { q: "å…©é¡†é­”æ³•çƒç„¡è«–åˆ†é–‹å¤šé éƒ½æœƒåŒæ™‚è®Šè‰²ï¼Œé€™å«ä»€éº¼ï¼Ÿ", opts: ["é‡å­ç³¾çº", "å¿ƒéˆæ„Ÿæ‡‰", "é­”è¡“"], a: "é‡å­ç³¾çº", t: "æƒ³åƒå…©é¡†çƒæœ‰éš±å½¢çš„é€£ç·šï¼Œé€™å°±æ˜¯é‡å­çš„ç¥å¥‡è¯ç¹«ã€‚" },
            'å¤§å­¸': { q: "é—œæ–¼è²çˆ¾ä¸ç­‰å¼çš„å¯¦é©—çµæœèªªæ˜äº†ä»€éº¼ï¼Ÿ", opts: ["å®šåŸŸå¯¦åœ¨è«–å¤±æ•ˆ", "å…‰é€Ÿå¯è¢«è¶…è¶Š", "èƒ½é‡ä¸å®ˆæ†"], a: "å®šåŸŸå¯¦åœ¨è«–å¤±æ•ˆ", t: "é€™è­‰æ˜äº†é‡å­åŠ›å­¸çš„éå®šåŸŸç‰¹å¾µï¼Œæ„›å› æ–¯å¦æ›¾ç¨±å…¶ç‚ºå¹½éˆèˆ¬çš„é è·ä½œç”¨ã€‚" },
            'ç¢©åš': { q: "åœ¨é‡å­è³‡è¨Šä¸­ï¼ŒGHZ æ…‹ä¸»è¦ç”¨æ–¼è­‰å¯¦ä»€éº¼ï¼Ÿ", opts: ["å¤šé«”éå®šåŸŸæ€§", "å–®ç²’å­ç›¸å¹²", "ç†±åŠ›å­¸ç¬¬äºŒå®šå¾‹"], a: "å¤šé«”éå®šåŸŸæ€§", t: "GHZ æ…‹å±•ç¾äº†ä¸‰é«”æˆ–æ›´å¤šç²’å­ä¹‹é–“æ¯”è²çˆ¾å°æ›´å¼·çš„éç¶“å…¸é—œè¯ã€‚" }
        }},
        { topic: "å¤å…¸è©©è©", levels: {
            'åœ‹å°': { q: "ã€Œæ˜¥çœ ä¸è¦ºæ›‰ã€çš„ä¸‹ä¸€å¥æ˜¯ï¼Ÿ", opts: ["è™•è™•èå•¼é³¥", "ä½é ­æ€æ•…é„‰", "èˆ‰é ­æœ›æ˜æœˆ"], a: "è™•è™•èå•¼é³¥", t: "é€™æ˜¯å­Ÿæµ©ç„¶çš„ã€Šæ˜¥æ›‰ã€‹ï¼Œæå¯«æ˜¥å¤©æ—©æ™¨çš„æ™¯è‰²ã€‚" },
            'é«˜ä¸­': { q: "è˜‡è»¾ã€Šå®šé¢¨æ³¢ã€‹ä¸­ã€Œå›é¦–å‘ä¾†è•­ç‘Ÿè™•ã€çš„ä¸‹ä¸€å¥æ˜¯ï¼Ÿ", opts: ["æ­¸å»ï¼Œä¹Ÿç„¡é¢¨é›¨ä¹Ÿç„¡æ™´", "ä¸€è“‘ç…™é›¨ä»»å¹³ç”Ÿ", "æ–™å³­æ˜¥é¢¨å¹é…’é†’"], a: "æ­¸å»ï¼Œä¹Ÿç„¡é¢¨é›¨ä¹Ÿç„¡æ™´", t: "é€™é«”ç¾äº†ä½œè€…åœ¨é€†å¢ƒä¸­è¶…ç„¶ç‰©å¤–ã€å¯µè¾±ä¸é©šçš„è±é”èƒ¸æ‡·ã€‚" },
            'ç¢©åš': { q: "ç‹åœ‹ç¶­åœ¨ã€Šäººé–“è©è©±ã€‹ä¸­æåˆ°çš„ã€Œä¸‰é‡å¢ƒç•Œã€ï¼Œæœ€é«˜å¢ƒç•Œæ˜¯ï¼Ÿ", opts: ["é©€ç„¶å›é¦–ï¼Œé‚£äººå»åœ¨ï¼Œç‡ˆç«é—ŒçŠè™•", "è¡£å¸¶æ¼¸å¯¬çµ‚ä¸æ‚”", "æ˜¨å¤œè¥¿é¢¨å‡‹ç¢§æ¨¹"], a: "é©€ç„¶å›é¦–ï¼Œé‚£äººå»åœ¨ï¼Œç‡ˆç«é—ŒçŠè™•", t: "é€™è±¡å¾µäº†ç¶“éè‰±è¾›æ¢ç´¢å¾Œï¼Œéˆæ„Ÿèˆ‡çœŸç†çš„ä¸æœŸè€Œé‡ã€‚" }
        }}
    ];

    const CONFIG = { 'åœ‹å°':{t:180,r:0.1,p:5}, 'åœ‹ä¸­':{t:60,r:0.5,p:10}, 'é«˜ä¸­':{t:30,r:1.0,p:20}, 'å¤§å­¸':{t:0,r:2.5,p:30}, 'ç¢©åš':{t:0,r:5.0,p:50} };

    function autoLoad() {
        if(state.mode !== 'idle') return;
        state.currentTopic = DATA_BANK[Math.floor(Math.random() * DATA_BANK.length)];
        document.getElementById('main-panel').style.display = 'block';
        document.getElementById('panel-title').innerText = `é¸é¡Œï¼š${state.currentTopic.topic}`;
        document.getElementById('panel-text').innerText = "è«‹é¸æ“‡é›£åº¦ç´šåˆ¥ï¼š";
        document.getElementById('diff-grid').innerHTML = Object.keys(CONFIG).map(l => 
            `<button class="btn" onclick="setLevel('${l}')">${l}</button>`
        ).join('');
        document.getElementById('options-area').innerHTML = "";
        document.getElementById('footer-ctrl').innerHTML = "";
    }

    function setLevel(l) {
        state.level = l;
        document.getElementById('diff-grid').innerHTML = "";
        document.getElementById('panel-text').innerText = `[${l}] é›£åº¦è¨­å®šå®Œæˆã€‚è«‹é¸å®šä¸€ä½å°å¸«é€²è¡Œæˆèª²ã€‚`;
    }

    function handleTeacher(t) {
        if(!state.level || state.mode !== 'idle') return;
        state.mode = 'teaching';
        state.teacher = t;
        document.getElementById(t === 'ling' ? 'pod-yi' : 'pod-ling').classList.add('locked');
        
        const qData = state.currentTopic.levels[state.level] || state.currentTopic.levels['åœ‹å°'];
        document.getElementById('panel-title').innerText = `å°å¸«ï¼šæ±Ÿ${t==='ling'?'éˆ´':'ä¾'} [${state.level}]`;
        document.getElementById('panel-text').innerText = `ã€å°å¸«æˆèª²ã€‘${qData.t}`;
        document.getElementById('footer-ctrl').innerHTML = `<button class="btn" onclick="startExam()">ç ”ç¿’å®Œç•¢ï¼Œé€²å…¥è€ƒé©—</button>`;
    }

    function startExam() {
        state.mode = 'exam';
        const qData = state.currentTopic.levels[state.level] || state.currentTopic.levels['åœ‹å°'];
        const conf = CONFIG[state.level];
        document.getElementById('panel-text').innerText = `ã€è€ƒé©—ã€‘${qData.q}`;
        document.getElementById('footer-ctrl').innerHTML = "";
        document.getElementById('options-area').innerHTML = qData.opts.map(o => 
            `<button class="btn opt-btn" onclick="submit('${o}')">${o}</button>`
        ).join('');

        if(conf.t > 0) {
            let s = conf.t;
            state.timer = setInterval(() => {
                s--;
                document.getElementById('timer-ui').innerText = `${s}s`;
                if(s <= 0) submit('');
            }, 1000);
        } else { document.getElementById('timer-ui').innerText = "âˆ ç ”è¨"; }
    }

    function submit(ans) {
        clearInterval(state.timer);
        const qData = state.currentTopic.levels[state.level] || state.currentTopic.levels['åœ‹å°'];
        const conf = CONFIG[state.level];
        if(ans === qData.a) {
            const gain = Math.floor(1000 * conf.r);
            state.coin += gain;
            alert(`æ­£ç¢ºï¼ç²å¾— ${gain} ç›æ˜ç‡ˆã€‚`);
        } else {
            state.hp -= conf.p;
            alert(`éŒ¯èª¤ï¼æ±Ÿè€å¸«æ„Ÿåˆ°å¤±æœ›ï¼Œæ‰£é™¤ ${conf.p} HPã€‚\næ­£è§£ï¼š${qData.a}`);
        }
        reset();
    }

    function reset() {
        state.mode = 'idle'; state.level = '';
        document.getElementById('main-panel').style.display = 'none';
        document.getElementById('pod-ling').classList.remove('locked');
        document.getElementById('pod-yi').classList.remove('locked');
        document.getElementById('timer-ui').innerText = "";
        updateUI();
    }

    function exchange() {
        // [è¨˜æ†¶è¨­å®š]ï¼šæ¯5000æ˜ç‡ˆæ›æ–°å‹•ä½œä¸€æ¬¡åªæ‰£5000
        if(state.coin < 5000) {
            alert("æ˜ç‡ˆä¸è¶³ 5000ï¼Œç„¡æ³•æ¼”åŒ–å‹•ä½œã€‚");
            return;
        }
        state.coin -= 5000;
        alert("æ¼”åŒ–æˆåŠŸï¼æ¶ˆè€— 5000 æ˜ç‡ˆï¼Œå‹•ä½œåº«å·²æ›´æ–°ï¼Œå‰©é¤˜æ˜ç‡ˆå·²ä¿ç•™ã€‚");
        updateUI();
    }

    function updateUI() {
        document.getElementById('coin-ui').innerText = state.coin;
        document.getElementById('hp-ui').innerText = state.hp;
    }
</script>
</body>
</html>
