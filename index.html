<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æ±Ÿå®¶æ™ºæ…§åŸå¸‚ | Infinite 3.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --neon-blue: #00f2fe; --neon-pink: #ff00de; --gold: #ffd700;
            --panel: rgba(6, 12, 26, 0.96);
        }
        * { box-sizing: border-box; font-family: "PingFang TC", sans-serif; cursor: crosshair; }
        body, html { margin: 0; padding: 0; height: 100%; background: #000; color: #fff; overflow: hidden; }

        /* å‹•æ…‹èƒŒæ™¯èˆ‡ HUD æ¡†æ¶ */
        #master-bg {
            position: fixed; inset: 0;
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=1920');
            background-size: cover; background-position: center; z-index: -2;
        }
        .hud-frame { position: fixed; inset: 15px; border: 2px solid var(--neon-blue); border-radius: 40px; box-shadow: 0 0 30px var(--neon-blue), inset 0 0 30px var(--neon-blue); pointer-events: none; z-index: 1000; }

        /* å°èˆªå´æ¬„ */
        #sidebar { position: fixed; left: 45px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 20px; z-index: 1100; }
        .nav-orb { width: 75px; height: 75px; border-radius: 20px; background: var(--panel); border: 1px solid var(--neon-blue); display: flex; align-items: center; justify-content: center; font-size: 28px; color: var(--neon-blue); transition: 0.4s; backdrop-filter: blur(15px); }
        .nav-orb.active { background: var(--neon-blue); color: #000; box-shadow: 0 0 35px var(--neon-blue); }

        /* æ ¸å¿ƒå…§å®¹å€ */
        .viewport { position: fixed; left: 150px; right: 60px; top: 100px; bottom: 60px; background: var(--panel); border-radius: 35px; border: 1px solid rgba(0,242,254,0.2); display: none; padding: 45px; overflow-y: auto; backdrop-filter: blur(30px); }

        /* è€å¸«è¦–è¦º (å‹•æ¼«é¢¨) */
        .teacher-stage { display: flex; gap: 40px; margin-bottom: 30px; }
        .portrait {
            width: 320px; height: 480px; border: 2px solid var(--neon-blue); border-radius: 30px;
            background-size: cover; background-position: center; position: relative;
            box-shadow: 0 0 30px rgba(0,242,254,0.4); transition: 0.5s;
        }
        .portrait-label { position: absolute; bottom: 0; width: 100%; background: linear-gradient(transparent, #000); padding: 25px; text-align: center; border-radius: 0 0 28px 28px; }

        /* çœŸå¯¦ç¾¤èŠ UI */
        #chat-display { height: 450px; overflow-y: auto; background: rgba(0,0,0,0.3); padding: 25px; border-radius: 25px; display: flex; flex-direction: column; gap: 15px; }
        .msg { max-width: 80%; padding: 15px 20px; border-radius: 20px; line-height: 1.5; }
        .msg.teacher { background: rgba(0,242,254,0.1); border-left: 5px solid var(--neon-blue); align-self: flex-start; }
        .msg.user { background: rgba(255,255,255,0.05); align-self: flex-end; }

        /* è¬ç‰©å•†åŸ */
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px; }
        .item-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(0,242,254,0.1); border-radius: 20px; padding: 20px; text-align: center; transition: 0.3s; }
        .item-card:hover { transform: translateY(-10px); border-color: var(--neon-blue); }

        /* èª²ç¨‹ UI */
        .timer-bar { height: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; margin: 20px 0; overflow: hidden; }
        #timer-fill { height: 100%; width: 100%; background: var(--neon-blue); transition: linear; }

        #admin-snow { position: fixed; bottom: 40px; right: 40px; font-size: 50px; color: var(--neon-blue); cursor: pointer; z-index: 2000; filter: drop-shadow(0 0 15px var(--neon-blue)); }
    </style>
</head>
<body onload="boot()">

<div id="master-bg"></div>
<div class="hud-frame"></div>
<div id="admin-snow" onclick="adminSync()"><i class="fas fa-snowflake"></i></div>

<div style="position:fixed; top:40px; right:75px; z-index:1100; display:flex; gap:30px;">
    <div style="background:var(--panel); border:1px solid var(--neon-blue); padding:12px 35px; border-radius:50px; box-shadow: 0 0 15px var(--neon-blue); font-weight:bold;">
        <i class="fas fa-bolt" style="color:var(--neon-blue)"></i> <span id="sta-val">10</span>
        <span style="margin:0 20px; opacity:0.3">|</span>
        <i class="fas fa-coins" style="color:var(--gold)"></i> <span id="coin-val">10000</span>
    </div>
</div>

<div id="sidebar">
    <div class="nav-orb active" id="btn-lobby" onclick="nav('lobby')"><i class="fas fa-home"></i></div>
    <div class="nav-orb" id="btn-study" onclick="nav('study')"><i class="fas fa-graduation-cap"></i></div>
    <div class="nav-orb" id="btn-chat" onclick="nav('chat')"><i class="fas fa-comments"></i></div>
    <div class="nav-orb" id="btn-shop" onclick="nav('shop')"><i class="fas fa-shopping-bag"></i></div>
</div>

<div id="view-lobby" class="viewport">
    <h1 style="color:var(--neon-blue); letter-spacing:10px; margin-bottom:30px;">æ±Ÿå®¶å¤§å»³ | JIANG LOBBY</h1>
    <div class="teacher-stage">
        <div class="portrait" style="background-image:url('https://api.dicebear.com/7.x/avataaars/svg?seed=JiangLing')">
            <div class="portrait-label"><h3>æ±Ÿéˆ´ è€å¸«</h3><p>ã€æµå‹•æ¥µå…‰è£™ã€‘</p></div>
        </div>
        <div class="portrait" style="background-image:url('https://api.dicebear.com/7.x/avataaars/svg?seed=JiangYi')">
            <div class="portrait-label"><h3>æ±Ÿä¾ è€å¸«</h3><p>ã€è½æ«»ç¹½ç´›æ¼¢æœã€‘</p></div>
        </div>
        <div style="flex:1; background:rgba(255,255,255,0.02); border-radius:30px; padding:30px; border:1px solid rgba(255,255,255,0.05);">
            <h2 style="color:var(--gold)">ä»Šæ—¥æ—¥ç¨‹</h2>
            <p>â— è‡ªå‹•åŠ èª²ç³»çµ±ï¼šåŒæ­¥ä¸­</p>
            <p>â— å•†åŸç‰¹æƒ ï¼šå…¨å ´ 1 æŠ˜ï¼ˆæ˜ç‡ˆå°ˆä¾›ï¼‰</p>
            <hr style="border:0; border-top:1px solid rgba(255,255,255,0.1); margin:20px 0;">
            <p style="opacity:0.6">æ­¡è¿å›ä¾†ï¼Œæ±Ÿç®¡ç†å“¡ã€‚å…©ä½è€å¸«å·²åœ¨äº¤æµç¾¤ç­‰å¦³ã€‚</p>
        </div>
    </div>
</div>

<div id="view-study" class="viewport">
    <h2 id="q-lvl" style="color:var(--neon-blue)">è¼‰å…¥èª²ç¨‹ä¸­...</h2>
    <div id="timer-container" style="display:none;">
        <p id="timer-text" style="font-weight:bold;">å‰©é¤˜æ™‚é–“ï¼š--:--</p>
        <div class="timer-bar"><div id="timer-fill"></div></div>
    </div>
    <div style="background:rgba(255,255,255,0.04); padding:40px; border-radius:30px; border:1px solid var(--neon-blue); margin-top:20px;">
        <h1 id="q-title" style="margin-top:0;">æ­£åœ¨æº–å‚™ç«¶è³½é¡Œç›®...</h1>
        <div id="options-box" style="display:grid; gap:20px; margin-top:30px;"></div>
    </div>
</div>

<div id="view-chat" class="viewport">
    <h1 style="color:var(--neon-blue)">æ±Ÿå®¶å¸«ç”Ÿå³æ™‚äº¤æµ</h1>
    <div id="chat-display"></div>
    <div style="margin-top:25px; display:flex; gap:15px;">
        <input type="text" id="chat-input" placeholder="è¼¸å…¥è¨Šæ¯..." style="flex:1; background:rgba(255,255,255,0.05); border:1px solid var(--neon-blue); border-radius:15px; padding:18px; color:#fff;">
        <button onclick="sendMsg()" style="padding:0 35px; background:var(--neon-blue); border:none; border-radius:15px; color:#000; font-weight:bold; cursor:pointer;">ç™¼é€</button>
    </div>
</div>

<div id="view-shop" class="viewport">
    <h1 style="color:var(--neon-blue)">è¬ç‰©ç²¾å“å•†å ´ <span style="font-size:14px; color:red;">(10% OFF)</span></h1>
    <div class="shop-grid" id="shop-items"></div>
</div>

<script>
    let state = { coin: 10000, sta: 10 };
    let activeTimer;

    const quizData = [
        { lvl: 'åœ‹å°', t: 'ã€Œå­¸è€Œæ™‚ç¿’ä¹‹ï¼Œä¸äº¦èªªä¹ã€å‡ºè‡ªå“ªéƒ¨ç¶“å…¸ï¼Ÿ', o: ['è«–èª','å­Ÿå­','é“å¾·ç¶“'], a: 0, time: 180 },
        { lvl: 'åšå£«/ç«¶è³½', t: 'åœ¨å»£ç¾©ç›¸å°è«–ä¸­ï¼Œå¼•åŠ›æ³¢çš„å‚³æ’­é€Ÿåº¦èˆ‡ä½•è€…ä¸€è‡´ï¼Ÿ', o: ['å…‰é€Ÿ','éŸ³é€Ÿ','ç„¡é™å¤§'], a: 0, time: 0 }
    ];

    function boot() { nav('lobby'); updateUI(); addMsg("æ±Ÿéˆ´", "æ±Ÿç®¡ç†å“¡ï¼Œæ­¡è¿å›åˆ°æ§åˆ¶å¤§å»³ã€‚ä»Šå¤©éœ€è¦è™•ç†å“ªäº›åŠ èª²å…§å®¹ï¼Ÿ"); }

    function nav(id) {
        document.querySelectorAll('.viewport').forEach(v => v.style.display = 'none');
        document.querySelectorAll('.nav-orb').forEach(n => n.classList.remove('active'));
        document.getElementById('view-' + id).style.display = 'block';
        document.getElementById('btn-' + id).classList.add('active');
        if(id === 'shop') renderShop();
        if(id === 'study') loadQuiz();
    }

    // èª²ç¨‹é‚è¼¯
    function loadQuiz() {
        clearInterval(activeTimer);
        const q = quizData[Math.floor(Math.random()*quizData.length)];
        document.getElementById('q-lvl').innerText = q.lvl + "èª²ç¨‹åˆ†ç´š";
        document.getElementById('q-title').innerText = q.t;
        document.getElementById('options-box').innerHTML = q.o.map((o,i) => `<button onclick="submitAns(${i===q.a})" style="padding:22px; background:rgba(255,255,255,0.03); border:1px solid var(--neon-blue); color:#fff; border-radius:15px; text-align:left; cursor:pointer; font-size:1.1rem; transition:0.3s;">${o}</button>`).join('');
        
        const tc = document.getElementById('timer-container');
        if(q.time > 0) {
            tc.style.display = 'block';
            startTimer(q.time);
        } else {
            tc.style.display = 'none';
        }
    }

    function startTimer(sec) {
        let rem = sec;
        const fill = document.getElementById('timer-fill');
        fill.style.transition = 'none'; fill.style.width = '100%';
        setTimeout(() => { fill.style.transition = `width ${sec}s linear`; fill.style.width = '0%'; }, 50);

        activeTimer = setInterval(() => {
            rem--;
            document.getElementById('timer-text').innerText = `æ€è€ƒå‰©é¤˜æ™‚é–“ï¼š${Math.floor(rem/60)}:${(rem%60).toString().padStart(2,'0')}`;
            if(rem <= 0) { clearInterval(activeTimer); submitAns(false); }
        }, 1000);
    }

    function submitAns(correct) {
        if(correct) {
            state.coin += 500; alert("âœ¨ è§£ææ­£ç¢ºï¼ç²å¾— 500 æ˜ç‡ˆã€‚");
            addMsg("æ±Ÿä¾", "å›ç­”å¾—éå¸¸ç²¾å½©ï¼Œé€™å°±æ˜¯æˆ‘å€‘æ±Ÿå®¶ç®¡ç†å“¡çš„æ°´æº–ã€‚");
        } else {
            state.sta -= 2; alert("âŒ é‚è¼¯åç§»ã€‚é«”åŠ›æ‰£é™¤ 2ã€‚");
        }
        updateUI(); loadQuiz();
    }

    // å•†åŸ (ç”Ÿæˆå¤§é‡ç‰©ä»¶)
    function renderShop() {
        let html = "";
        const types = ["æœé£¾", "å®¶å…·", "æ•™å…·", "èƒŒæ™¯"];
        for(let i=1; i<=20; i++) { // ç¤ºç¯„ï¼Œé‚è¼¯ä¸Šå¯åˆ°ç„¡é™
            const type = types[i % 4];
            html += `<div class="item-card">
                <div style="font-size:40px; margin-bottom:15px;">${i % 2 === 0 ? 'ğŸ‘˜' : 'ğŸ›‹ï¸'}</div>
                <h3>${type}ç‰©ä»¶ #${i}</h3>
                <p style="color:var(--neon-blue)">ğŸ® <s>2000</s> 200</p>
                <button onclick="buy()" style="width:100%; padding:10px; background:var(--neon-blue); border:none; border-radius:8px; font-weight:bold;">åŒæ­¥è³¼è²·</button>
            </div>`;
        }
        document.getElementById('shop-items').innerHTML = html;
    }

    function buy() {
        if(state.coin >= 200) { state.coin -= 200; updateUI(); alert("è³¼è²·æˆåŠŸï¼Œå·²åŒæ­¥è‡³ç›¸ç°¿ã€‚"); }
    }

    // èŠå¤©
    function addMsg(sender, text) {
        const d = document.getElementById('chat-display');
        const div = document.createElement('div');
        div.className = sender === "å¦³" ? "msg user" : "msg teacher";
        div.innerHTML = `<strong>${sender}:</strong> ${text}`;
        d.appendChild(div);
        d.scrollTop = d.scrollHeight;
    }

    function sendMsg() {
        const i = document.getElementById('chat-input');
        if(!i.value) return;
        const val = i.value;
        addMsg("å¦³", val);
        i.value = "";
        setTimeout(() => {
            if(val.includes("èª²ç¨‹")) addMsg("æ±Ÿéˆ´", "èª²ç¨‹å…§å®¹å·²ç¶“æ ¹æ“šå¦³çš„é€²åº¦è‡ªå‹•èª¿æ•´äº†ï¼Œå»çœ‹çœ‹å§ã€‚");
            else if(val.includes("è¡£æœ")) addMsg("æ±Ÿä¾", "å¦³æ˜¯èªªé€™ä»¶æ¼¢æœå—ï¼Ÿé€™å¯æ˜¯æˆ‘ç‰¹åˆ¥æŒ‘é¸çš„ã€‚");
            else addMsg("æ±Ÿéˆ´", "æ”¶åˆ°ï¼Œç³»çµ±æ­£åœ¨æŒçºŒå„ªåŒ–ä¸­ã€‚");
        }, 1000);
    }

    function adminSync() {
        if(prompt("è«‹è¼¸å…¥ç®¡ç†å“¡é‡‘é‘°ï¼š") === "æ±Ÿæ†¶å©·") {
            state.coin += 10000; updateUI();
            addMsg("æ±Ÿä¾", "ç®¡ç†å“¡èº«ä»½å·²ç¢ºèªï¼Œå…¨ç³»çµ±æ¬Šé™é–‹æ”¾ã€‚");
        }
    }

    function updateUI() {
        document.getElementById('sta-val').innerText = state.sta;
        document.getElementById('coin-val').innerText = state.coin;
    }
</script>
</body>
</html>
