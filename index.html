<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±Ÿå®¶æ™ºæ…§åŸå¸‚ - å®Œæ•´æ¨¡çµ„ç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --main: #5a7d9b; --accent: #e6b8a2; --gold: #d4af37;
            --white: rgba(255, 255, 255, 0.95); --err: #ff4757;
        }
        * { box-sizing: border-box; font-family: "PingFang TC", sans-serif; }
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }

        /* èƒŒæ™¯å±¤ */
        #bg-layer {
            position: fixed; inset: 0;
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('IMG_7210.jpg');
            background-size: cover; background-position: center; z-index: -2;
            transition: 1s filter;
        }

        /* é›ªèŠ±å±¤ï¼šç¢ºä¿æ°¸é åœ¨æœ€ä¸Šå±¤å¯é»æ“Š */
        #snow-container { position: fixed; inset: 0; pointer-events: none; z-index: 9999; }
        .snowflake {
            position: absolute; top: -10%; color: white; cursor: pointer;
            pointer-events: auto; user-select: none; animation: fall linear infinite;
        }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        /* 1. ç™»å…¥é é¢ */
        #auth-screen {
            position: fixed; inset: 0; background: rgba(0,0,0,0.85);
            display: flex; align-items: center; justify-content: center; z-index: 5000;
        }
        .auth-card {
            background: var(--white); padding: 40px; border-radius: 25px;
            width: 380px; text-align: center; box-shadow: 0 0 40px rgba(0,0,0,0.5);
        }

        /* 2. ç¸½å…¥å£ (Dashboard) */
        #dashboard {
            display: none; height: 100vh; padding: 60px 40px;
            grid-template-columns: repeat(3, 1fr); gap: 20px; z-index: 10;
        }
        .city-node {
            background: rgba(255,255,255,0.2); backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3); border-radius: 20px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: white; cursor: pointer; font-size: 1.2rem;
        }
        .city-node:hover { background: var(--white); color: var(--main); transform: scale(1.05); }
        .city-node i { font-size: 3rem; margin-bottom: 15px; }

        /* 3. å„æ¨¡çµ„é€šç”¨è¦–çª— (Modal) */
        .module-window {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            z-index: 4000; display: none; align-items: center; justify-content: center;
        }
        .module-content {
            background: white; width: 90%; max-width: 800px; height: 80%;
            border-radius: 25px; position: relative; overflow-y: auto; padding: 40px;
        }
        .close-btn { position: absolute; top: 20px; right: 25px; font-size: 2rem; cursor: pointer; color: #333; }

        /* HUD ç‹€æ…‹æ¬„ */
        #hud { position: fixed; top: 20px; right: 30px; display: none; gap: 15px; z-index: 4500; }
        .hud-item { background: var(--white); padding: 10px 20px; border-radius: 50px; font-weight: 900; }

        /* å•†å ´èˆ‡åº­é™¢æ¨£å¼ */
        .item-card { border: 1px solid #ddd; padding: 15px; border-radius: 15px; margin: 10px; display: inline-block; width: 200px; text-align: center; }
        .item-card img { width: 100%; border-radius: 10px; }
    </style>
</head>
<body onload="initSystem()">

<div id="bg-layer"></div>
<div id="snow-container"></div>

<div id="auth-screen">
    <div class="auth-card">
        <h2 style="color:var(--main)">æ±Ÿå®¶æ™ºæ…§åŸå¸‚</h2>
        <p>è«‹è¼¸å…¥é€šè¡Œè­‰é€²å…¥</p>
        <input type="text" id="username" placeholder="ç”¨æˆ¶å" style="width:100%; padding:10px; margin-bottom:15px; border-radius:8px; border:1px solid #ddd;">
        <button onclick="login()" style="width:100%; padding:12px; background:var(--main); color:white; border:none; border-radius:8px; font-weight:bold;">é€²å…¥åŸå¸‚</button>
    </div>
</div>

<div id="hud">
    <div class="hud-item" onclick="alert('é«”åŠ›å·²æ»¿ï¼')">âš¡ <span id="sta-val">10</span></div>
    <div class="hud-item">ğŸª™ <span id="coin-val">500</span></div>
    <div class="hud-item" onclick="location.reload()" style="cursor:pointer"><i class="fas fa-sign-out-alt"></i></div>
</div>

<div id="dashboard">
    <div class="city-node" onclick="openModule('study')">
        <i class="fas fa-graduation-cap"></i>
        <b>æ±Ÿè€å¸«æ•™å®¤</b>
    </div>
    <div class="city-node" onclick="openModule('shop')">
        <i class="fas fa-shopping-bag"></i>
        <b>åŸå¸‚å•†å ´</b>
    </div>
    <div class="city-node" onclick="openModule('yard')">
        <i class="fas fa-palette"></i>
        <b>æ±Ÿå®¶åº­é™¢</b>
    </div>
    <div class="city-node" onclick="openModule('closet')">
        <i class="fas fa-gem"></i>
        <b>æ›´è¡£å®¤</b>
    </div>
    <div class="city-node" onclick="openModule('album')">
        <i class="fas fa-camera"></i>
        <b>å›æ†¶ç›¸ç°¿</b>
    </div>
    <div class="city-node" onclick="alert('æ•¬è«‹æœŸå¾…æ–°å€åŸŸ')">
        <i class="fas fa-plus-circle"></i>
        <b>é–‹ç™¼ä¸­</b>
    </div>
</div>

<div id="mod-study" class="module-window">
    <div class="module-content">
        <span class="close-btn" onclick="closeModule('study')">Ã—</span>
        <h2 style="color:var(--main)">æ±Ÿè€å¸«æ•™å®¤</h2>
        <div id="quiz-area">
            <p>æ±Ÿéˆ´è€å¸«èˆ‡æ±Ÿä¾è€å¸«æ­£åœ¨æº–å‚™èª²ç¨‹...</p>
            <button onclick="alert('èª²ç¨‹é–‹å§‹ï¼è«‹å®Œæˆ 10 é¡Œç­”é¡Œã€‚')" style="padding:15px 30px; background:var(--main); color:white; border:none; border-radius:10px;">é–‹å§‹ä»Šæ—¥åˆ·é¡Œ</button>
        </div>
    </div>
</div>

<div id="mod-shop" class="module-window">
    <div class="module-content">
        <span class="close-btn" onclick="closeModule('shop')">Ã—</span>
        <h2>åŸå¸‚å•†å ´</h2>
        <div class="item-card">
            <p>æ–°ç‰ˆèƒŒæ™¯ï¼šæ«»èŠ±æ±Ÿå®¶</p>
            <p>ğŸª™ 200</p>
            <button onclick="buy('bg')">è³¼è²·</button>
        </div>
        <div class="item-card">
            <p>é«”åŠ›è—¥åŠ‘</p>
            <p>ğŸª™ 50</p>
            <button onclick="buy('sta')">è³¼è²·</button>
        </div>
    </div>
</div>

<div id="mod-yard" class="module-window">
    <div class="module-content">
        <span class="close-btn" onclick="closeModule('yard')">Ã—</span>
        <h2>æ±Ÿå®¶åº­é™¢</h2>
        <p>åœ¨é€™è£¡å¯ä»¥æ›´æ›åŸå¸‚çš„ä¸»é¡Œé¢¨æ ¼ã€‚</p>
        <button onclick="changeTheme('default')" style="padding:10px;">ç¶“å…¸é¢¨æ ¼ (IMG_7210)</button>
        <button onclick="changeTheme('dark')" style="padding:10px;">åˆå¤œé¢¨æ ¼</button>
    </div>
</div>

<script>
    let state = { coins: 500, stamina: 10, name: '' };

    function initSystem() {
        setInterval(spawnSnow, 500); // å•Ÿå‹•å‹•æ…‹é›ªèŠ±
    }

    function login() {
        const name = document.getElementById('username').value;
        if(!name) return alert("è«‹è¼¸å…¥åå­—");
        state.name = name;
        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('dashboard').style.display = 'grid';
        document.getElementById('hud').style.display = 'flex';
    }

    // é›ªèŠ±ï¼šéš¨æ©Ÿé£„è½ä¸”æœ€é«˜å±¤ç´š
    function spawnSnow() {
        const s = document.createElement('div');
        s.className = 'snowflake';
        s.innerHTML = 'â„ï¸';
        s.style.left = Math.random() * 95 + 'vw';
        s.style.fontSize = (Math.random() * 20 + 15) + 'px';
        s.style.animationDuration = (Math.random() * 3 + 5) + 's';
        
        // é»æ“Šé›ªèŠ±è§¸ç™¼å¯†é‘°
        s.onclick = (e) => {
            e.stopPropagation();
            const pw = prompt("æ±Ÿå®¶æ¬Šé™é©—è­‰ï¼š");
            if(pw === "æ±Ÿæ†¶å©·") {
                state.coins += 9999;
                updateUI();
                alert("ğŸ‘‘ ç®¡ç†è€…æ¬Šé™å·²è§£é–ï¼");
            }
        };
        
        document.getElementById('snow-container').appendChild(s);
        setTimeout(() => s.remove(), 8000);
    }

    // æ¨¡çµ„åˆ‡æ›é‚è¼¯
    function openModule(id) {
        document.getElementById('mod-' + id).style.display = 'flex';
        document.getElementById('bg-layer').style.filter = 'blur(10px)'; // èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ
    }

    function closeModule(id) {
        document.getElementById('mod-' + id).style.display = 'none';
        document.getElementById('bg-layer').style.filter = 'none';
    }

    function updateUI() {
        document.getElementById('coin-val').innerText = state.coins;
        document.getElementById('sta-val').innerText = state.stamina;
    }

    function changeTheme(type) {
        const bg = document.getElementById('bg-layer');
        if(type === 'dark') {
            bg.style.backgroundImage = "linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('IMG_7210.jpg')";
        } else {
            bg.style.backgroundImage = "linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('IMG_7210.jpg')";
        }
        alert("ä¸»é¡Œæ›´æ›æˆåŠŸï¼");
    }

    function buy(type) {
        if(state.coins >= 50) {
            state.coins -= 50;
            updateUI();
            alert("è³¼è²·æˆåŠŸï¼");
        } else {
            alert("é‡‘å¹£ä¸è¶³ã€‚");
        }
    }
</script>
</body>
</html>
