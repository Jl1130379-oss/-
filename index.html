<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±Ÿå®¶æ™ºæ…§åŸå¸‚ï¼šé†«æ–‡é›™ä¿®çµ‚æ¥µç‰ˆ</title>
    <style>
        :root { 
            --sci: #A5F3FC; --art: #FBCFE8; 
            --aurora: linear-gradient(45deg, #00f2ff, #7000ff, #00ff95); 
            --sakura: linear-gradient(45deg, #ff9a9e, #fad0c4, #ffdde1);
            --admin-gold: #FACC15; 
        }
        * { box-sizing: border-box; font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        body { margin: 0; background: #0F172A; color: #F8FAFC; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* --- ç³»çµ±é–‹æ©Ÿç•«é¢ --- */
        #boot-screen { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; font-family: monospace; }
        .log-line { color: #00FF00; font-size: 0.9rem; margin: 2px; width: 80%; }

        /* --- ç‰¹æ•ˆèƒŒæ™¯å±¤ --- */
        .fx-layer { position: absolute; inset: -100px; opacity: 0; filter: blur(80px); z-index: 1; border-radius: 50%; pointer-events: none; }
        .active-fx { opacity: 0.7; animation: pulse-flow 8s infinite alternate; }
        @keyframes pulse-flow { 0% { transform: scale(1) rotate(0deg); } 100% { transform: scale(1.2) rotate(15deg); } }

        /* --- é ‚éƒ¨å°èˆª --- */
        header { padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; z-index: 100; background: rgba(0,0,0,0.7); border-bottom: 1px solid rgba(255,255,255,0.1); }
        .badge { background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 20px; font-weight: bold; border: 1px solid rgba(255,255,255,0.2); font-size: 0.9rem; }
        .admin-glow { color: var(--admin-gold); border-color: var(--admin-gold); box-shadow: 0 0 10px var(--admin-gold); }

        /* --- ä¸»ç•«é¢ --- */
        main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; z-index: 10; padding: 20px; }
        .character-stage { position: relative; width: 320px; height: 480px; cursor: pointer; }
        .teacher-img { width: 100%; height: 100%; object-fit: contain; z-index: 5; position: relative; filter: drop-shadow(0 0 15px rgba(255,255,255,0.2)); }
        
        .bubble { background: rgba(255,255,255,0.95); color: #1E293B; padding: 15px 25px; border-radius: 25px; margin-bottom: 20px; font-weight: bold; box-shadow: 0 10px 30px rgba(0,0,0,0.5); text-align: center; max-width: 400px; }

        /* --- æ“ä½œé¢æ¿ --- */
        .control-panel { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 20px; border-radius: 30px; width: 100%; max-width: 500px; border: 1px solid rgba(255,255,255,0.2); }
        .btn { width: 100%; padding: 12px; margin: 6px 0; border: none; border-radius: 15px; background: white; color: #1E293B; cursor: pointer; font-weight: bold; font-size: 1rem; }
        .btn:hover { background: var(--sci); transform: translateY(-3px); }
        .btn-admin-only { background: var(--admin-gold); color: #451A03; display: none; }

        /* --- çå¯¶é–£å•†å ´ --- */
        #shop-ui { position: fixed; bottom: -100%; left: 0; width: 100%; height: 70%; background: white; color: #1E293B; border-radius: 30px 30px 0 0; z-index: 500; padding: 30px; display: flex; flex-direction: column; }
        .shop-open { bottom: 0 !important; }
        .item-list { flex: 1; overflow-y: auto; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .item-card { background: #F1F5F9; padding: 15px; border-radius: 20px; text-align: center; border: 2px solid transparent; }
        .item-card:hover { border-color: var(--admin-gold); }

        #cheat-alert { position: fixed; inset: 0; background: #EF4444; z-index: 11000; display: none; flex-direction: column; align-items: center; justify-content: center; }
    </style>
</head>
<body>

<div id="boot-screen">
    <div id="logs"></div>
</div>

<div id="cheat-alert">
    <h1>âš ï¸ åµæ¸¬åˆ°éæ³•é›¢é–‹</h1>
    <p>æ±Ÿéˆ´è€å¸«ä¸å–œæ­¡å¦³åœ¨ç­”é¡Œæ™‚åˆ†å¿ƒå–”ã€‚</p>
    <button class="btn" onclick="location.reload()" style="width:200px">é‡å•ŸåŸå¸‚ç³»çµ±</button>
</div>

<header>
    <div id="role-tag" class="badge">èº«ä»½ï¼šæ­£å¼å­¸å“¡</div>
    <div style="display:flex; gap:12px;">
        <div class="badge">âš¡ <span id="e-val">100</span></div>
        <div class="badge">ğŸª™ <span id="c-val">500</span></div>
        <button id="shop-btn" class="badge" style="display:none; background:var(--admin-gold); color:black; cursor:pointer;" onclick="toggleShop()">ğŸ’ çå¯¶é–£</button>
    </div>
</header>

<main>
    <div id="talk" class="bubble">ç³»çµ±è¨ºæ–·ä¸­...</div>
    <div class="character-stage" onclick="handleTeacherClick()">
        <div id="fx-aurora" class="fx-layer" style="background: var(--aurora);"></div>
        <div id="fx-sakura" class="fx-layer" style="background: var(--sakura);"></div>
        <img id="img-sci" class="teacher-img" src="IMG_3812.jpeg" alt="æ±Ÿéˆ´">
        <img id="img-art" class="teacher-img" src="IMG_4392.jpg" style="display:none;" alt="æ±Ÿä¾">
    </div>

    <div class="control-panel">
        <button class="btn" onclick="switchTeacher()">ğŸ”„ åˆ‡æ›å°å¸« (æ±Ÿéˆ´/æ±Ÿä¾)</button>
        <button class="btn" onclick="window.open('https://cap.rcpet.edu.tw/')">ğŸ“ åœ‹ä¸­æœƒè€ƒä¸­å¿ƒ</button>
        <button class="btn" onclick="window.open('https://www.tcool.cc/')">ğŸ« å°å­¸ T-Cool é¡Œåº«</button>
        <button id="adm-1" class="btn btn-admin-only" onclick="window.open('https://master.get.com.tw/')">ğŸš€ ç¢©åšå°ˆæ¥­é »é“</button>
        <button id="adm-2" class="btn btn-admin-only" onclick="window.open('https://wp.cjhs.kh.edu.tw/')">ğŸ§ª é«˜ä¸­ç‰©ç†å°ˆç ”</button>
    </div>
</main>

<div id="shop-ui">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 style="margin:0">ğŸ’ æ±Ÿå®¶æ™ºæ…§çå¯¶é–£</h2>
        <button class="btn" style="width:80px" onclick="toggleShop()">é—œé–‰</button>
    </div>
    <div class="item-list">
        <div class="item-card"><h3>ğŸ§¬ åˆ†å­å„€</h3><p>3000ğŸª™</p><button class="btn" onclick="buy()">è³¼è²·</button></div>
        <div class="item-card"><h3>ğŸ“œ æ°¸æ¨‚å¤§å…¸</h3><p>2500ğŸª™</p><button class="btn" onclick="buy()">è³¼è²·</button></div>
        <div class="item-card"><h3>ğŸŒ¡ï¸ è¶…å°åˆ€</h3><p>5000ğŸª™</p><button class="btn" onclick="buy()">è³¼è²·</button></div>
        <div class="item-card"><h3>ğŸ–Œï¸ å¾½å¢¨</h3><p>4500ğŸª™</p><button class="btn" onclick="buy()">è³¼è²·</button></div>
    </div>
</div>

<script>
    let user = { e: 100, c: 500, isAdmin: false, teacher: 'sci', clicks: 0 };

    // --- 1. è‡ªå‹•è¨ºæ–·å•Ÿå‹•æµç¨‹ ---
    async function initCity() {
        const logBox = document.getElementById('logs');
        const lines = [
            "CONNECTING TO 108 CURRICULUM CLOUD...",
            "VERIFYING DATA SOURCES: GET.COM, RCPET, TCOOL...",
            "LOADING ASSETS: IMG_3812 (æ±Ÿéˆ´), IMG_4392 (æ±Ÿä¾)...",
            "INITIALIZING AURORA & SAKURA ENGINE...",
            "SECURITY CHECK: ANTI-CHEAT MODULE READY.",
            "WELCOME TO JIANG'S SMART CITY."
        ];
        for(let line of lines) {
            let d = document.createElement('div');
            d.className = 'log-line';
            d.innerText = `> ${line}`;
            logBox.appendChild(d);
            await new Promise(r => setTimeout(r, 400));
        }
        document.getElementById('boot-screen').style.opacity = 0;
        setTimeout(() => {
            document.getElementById('boot-screen').style.display = 'none';
            document.getElementById('talk').innerText = "ä½ å¥½ï¼æˆ‘æ˜¯æ±Ÿéˆ´ã€‚ä»Šå¤©è¦é–‹å•Ÿå“ªé–€èª²å‘¢ï¼Ÿ";
        }, 500);
    }

    // --- 2. ç®¡ç†å“¡è§£é–é‚è¼¯ ---
    function handleTeacherClick() {
        user.clicks++;
        if(user.clicks === 5 && !user.isAdmin) {
            unlockAdmin();
        } else {
            document.getElementById('talk').innerText = user.teacher === 'sci' ? 
                "æ±Ÿéˆ´ï¼šç§‘å­¸çš„åš´è¬¹ä¸­ä¹Ÿå¸¶è‘—æº«æš–å–”ï¼" : "æ±Ÿä¾ï¼šè®“æˆ‘å€‘åœ¨æ–‡å­¸çš„æµ·æ´‹è£¡æ…¢è·‘ã€‚";
        }
    }

    function unlockAdmin() {
        user.isAdmin = true;
        user.c = 999999;
        document.getElementById('role-tag').innerText = "èº«ä»½ï¼šç®¡ç†å“¡ (GOD)";
        document.getElementById('role-tag').classList.add('admin-glow');
        document.getElementById('shop-btn').style.display = 'block';
        document.getElementById('c-val').innerText = "999,999";
        
        document.querySelectorAll('.btn-admin-only').forEach(b => b.style.display = 'block');
        updateTeacherFX();
        alert("ğŸ›¡ï¸ æœ€é«˜æ¬Šé™è§£é–ï¼æ¥µå…‰èˆ‡æ«»èŠ±ç‰¹æ•ˆå·²å•Ÿå‹•ï¼Œç¢©åšé »é“å·²é–‹å•Ÿã€‚");
    }

    // --- 3. è§’è‰²èˆ‡ç‰¹æ•ˆåˆ‡æ› ---
    function switchTeacher() {
        user.teacher = user.teacher === 'sci' ? 'art' : 'sci';
        document.getElementById('img-sci').style.display = user.teacher === 'sci' ? 'block' : 'none';
        document.getElementById('img-art').style.display = user.teacher === 'art' ? 'block' : 'none';
        updateTeacherFX();
    }

    function updateTeacherFX() {
        const aurora = document.getElementById('fx-aurora');
        const sakura = document.getElementById('fx-sakura');
        if(!user.isAdmin) return;

        if(user.teacher === 'sci') {
            aurora.classList.add('active-fx');
            sakura.classList.remove('active-fx');
            document.getElementById('talk').innerText = "æ±Ÿéˆ´ï¼šæ¥µå…‰å¯¦é©—è£™å·²å•Ÿå‹•ï¼Œæ­£åœ¨åˆ†ææ•¸æ“š...";
        } else {
            sakura.classList.add('active-fx');
            aurora.classList.remove('active-fx');
            document.getElementById('talk').innerText = "æ±Ÿä¾ï¼šæ«»èŠ±æ¼¢æœå·²å°±ç·’ï¼Œæ„Ÿå—æ–‡å­—çš„æº«åº¦ã€‚";
        }
    }

    // --- 4. å•†å ´èˆ‡é˜²å¼Š ---
    function toggleShop() { document.getElementById('shop-ui').classList.toggle('shop-open'); }
    function buy() { alert("ç®¡ç†å“¡å°ˆå±¬æ’¥æ¬¾æˆåŠŸï¼å•†å“å·²ç™¼é€è‡³æ‚¨çš„è™›æ“¬å€‰åº«ã€‚"); }

    document.addEventListener("visibilitychange", () => {
        if (document.hidden && !user.isAdmin) {
            document.getElementById('cheat-alert').style.display = 'flex';
        }
    });

    // å•Ÿå‹•è¨ºæ–·
    initCity();
</script>
</body>
</html>
