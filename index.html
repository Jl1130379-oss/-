<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æ±Ÿå®¶æ™ºæ…§åŸå¸‚ - è™›æ“¬ç©¿è¶Š 3.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --anime-blue: #6d9bc3; --anime-pink: #fbc2eb;
            --glass: rgba(255, 255, 255, 0.85); --neon: #00f2fe;
        }
        * { box-sizing: border-box; font-family: "Microsoft JhengHei", sans-serif; }
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }

        /* ç©¿è¶Šç‰¹æ•ˆå±¤ */
        #transfer-gate {
            position: fixed; inset: 0; background: black; z-index: 9999;
            display: none; align-items: center; justify-content: center;
            flex-direction: column; color: var(--neon);
        }
        .scan-line { width: 100%; height: 2px; background: var(--neon); position: absolute; animation: scan 1.5s infinite; box-shadow: 0 0 15px var(--neon); }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

        /* èƒŒæ™¯èˆ‡å‹•æ¼«é¢¨æ ¼æ¿¾é¡ */
        #bg-layer {
            position: fixed; inset: 0; background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('IMG_7210.jpg') center/cover;
            filter: saturate(1.5) contrast(1.1); z-index: -1;
        }

        /* å´é‚Šå°èˆª - å‹•æ¼«æ‡¸æµ®çª—æ„Ÿ */
        #sidebar {
            position: fixed; left: 20px; top: 20px; bottom: 20px; width: 220px;
            background: var(--glass); border-radius: 25px; backdrop-filter: blur(20px);
            display: none; flex-direction: column; padding: 20px; border: 1px solid rgba(255,255,255,0.4); z-index: 1000;
        }
        .nav-btn {
            padding: 15px; margin: 8px 0; cursor: pointer; border-radius: 12px;
            display: flex; align-items: center; gap: 12px; transition: 0.3s; color: #444; font-weight: bold;
        }
        .nav-btn:hover { background: var(--anime-blue); color: white; transform: translateX(10px); }

        /* è¦–çª—è¨­è¨ˆ - ç©¿è¶Šå¾Œçš„æ•™å®¤ */
        .window-layer {
            position: fixed; left: 260px; right: 20px; top: 20px; bottom: 20px;
            background: var(--glass); border-radius: 30px; display: none;
            padding: 40px; overflow-y: auto; z-index: 500; border: 1px solid white;
        }

        /* è€å¸«å‹•æ¼«å½¢è±¡å¡ (æœƒæ›è£) */
        .teacher-hud {
            display: flex; align-items: center; gap: 20px; background: rgba(109,155,195,0.1);
            padding: 20px; border-radius: 20px; margin-bottom: 25px; border-left: 5px solid var(--anime-blue);
        }
        #teacher-img { font-size: 50px; filter: drop-shadow(0 0 10px white); }

        /* å•†å ´å•†å“å¡ç‰‡ */
        .shop-item {
            background: white; border-radius: 20px; padding: 20px; text-align: center;
            border: 2px solid transparent; transition: 0.3s; position: relative;
        }
        .shop-item.owned { filter: grayscale(0.8); cursor: default; }
        .shop-item.owned::after { content: "å·²æ”¶è—"; position: absolute; top: 10px; right: 10px; background: var(--anime-blue); color: white; padding: 2px 8px; border-radius: 5px; font-size: 12px; }

        /* å›ºå®šç²¾ç¾é›ªèŠ± */
        .fixed-snow { position: fixed; font-size: 40px; color: white; cursor: pointer; z-index: 5000; filter: drop-shadow(0 0 15px var(--neon)); animation: float 3s infinite ease-in-out; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
    </style>
</head>
<body>

<div id="bg-layer"></div>
<div id="transfer-gate"><div class="scan-line"></div><h2>LINK START... æ­£åœ¨ç©¿è¶Šé€²å…¥æ±Ÿå®¶è™›æ“¬è¨­å‚™</h2></div>

<div class="fixed-snow" style="bottom: 30px; right: 30px;" onclick="admin()">â„ï¸</div>

<div id="auth-screen" style="position:fixed; inset:0; background:rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; z-index:10000;">
    <div style="background:var(--glass); padding:50px; border-radius:30px; width:400px; text-align:center; backdrop-filter:blur(20px);">
        <h1 style="color:var(--anime-blue)">æ±Ÿå®¶æ™ºæ…§åŸå¸‚</h1>
        <p>è™›æ“¬ç©¿æˆ´è¨­å‚™å·²å°±ç·’</p>
        <button onclick="login()" style="width:100%; padding:15px; background:linear-gradient(to right, #6dd5ed, #2193b0); color:white; border:none; border-radius:15px; cursor:pointer; font-weight:bold;">åŒæ­¥æ„è­˜é€²å…¥</button>
    </div>
</div>

<div id="sidebar">
    <div class="nav-btn" onclick="jump('study')"><i class="fas fa-university"></i> é€²å…¥èª²å ‚</div>
    <div class="nav-btn" onclick="jump('shop')"><i class="fas fa-shopping-bag"></i> è™›æ“¬å•†å ´</div>
    <div class="nav-item" onclick="jump('closet')" style="padding:15px; cursor:pointer;"><i class="fas fa-magic"></i> ç§äººæ›´è¡£å®¤</div>
    <div style="margin-top:auto; padding:15px; background:rgba(0,0,0,0.05); border-radius:15px;">
        <div>ğŸ® æ˜ç‡ˆ: <span id="coin-val">500</span></div>
        <div style="margin-top:5px;">âš¡ é«”åŠ›: <span id="sta-val">10</span></div>
    </div>
</div>

<div id="layer-study" class="window-layer">
    <div class="teacher-hud">
        <div id="teacher-img">ğŸ‘©â€ğŸ«</div>
        <div>
            <h3 id="teacher-name">æ±Ÿè€å¸«æ­£åœ¨æˆèª²...</h3>
            <p>ç•¶å‰è£å‚™ï¼š<span id="current-gear" style="color:var(--anime-blue)">é è¨­å¥—è£</span></p>
        </div>
    </div>
    
    <div id="lecture-area" style="background:white; padding:25px; border-radius:20px; margin-bottom:20px;">
        <h4 style="color:var(--anime-blue)">ä»Šæ—¥è¬›ç¾©ï¼šäººé«”é˜²ç¦¦æ©Ÿåˆ¶</h4>
        <p>æ±Ÿè€å¸«ï¼šã€ŒåŒå­¸å€‘ï¼ŒBç´°èƒå°±åƒæ˜¯æˆ‘å€‘åŸå¸‚çš„è­¦è¡›ï¼Œè² è²¬è£½é€ æŠ—é«”ä¾†æ¨™è¨˜æ•µäºº...ã€</p>
        <button onclick="startQuiz()" style="padding:10px 20px; background:var(--anime-pink); border:none; border-radius:10px; cursor:pointer;">é–‹å§‹éš¨å ‚æ¸¬è©¦</button>
    </div>

    <div id="quiz-area" style="display:none; text-align:center;">
        <h2 id="q-text">é¡Œç›®è¼‰å…¥ä¸­...</h2>
        <div id="options"></div>
        <div id="correction-note" style="display:none; margin-top:20px; padding:15px; background:#fff4f4; border-radius:10px; color:#d63031;">
            <strong>ç³¾éŒ¯ç­†è¨˜ï¼š</strong> å‰›æ‰é€™é¡Œå¦³é¸éŒ¯äº†ï¼Œæ­£ç¢ºæ‡‰è©²æ˜¯... (åˆ·é¡Œå¯è£œå›é«”åŠ›)
        </div>
    </div>
</div>

<div id="layer-shop" class="window-layer">
    <h1 style="color:var(--anime-blue)">æ±Ÿå®¶ç²¾å“è™›æ“¬å•†å ´</h1>
    <div class="shop-grid" style="display:grid; grid-template-columns:repeat(3,1fr); gap:20px;" id="shop-container">
        </div>
</div>

<script>
    let state = { coins: 500, stamina: 10, items: [], equipped: 'é è¨­å¥—è£', avatar: 'ğŸ‘©â€ğŸ«' };
    const products = [
        { id: 'h1', name: 'å‹•æ¼«é¢¨é•·é«®', price: 200, icon: 'ğŸ’‡â€â™€ï¸' },
        { id: 'h2', name: 'æ˜Ÿç©ºé«®é£¾', price: 150, icon: 'ğŸ€' },
        { id: 'c1', name: 'æ±Ÿå®¶å­¸é™¢æœ', price: 600, icon: 'ğŸ‘—' }
    ];

    function login() {
        document.getElementById('transfer-gate').style.display = 'flex';
        setTimeout(() => {
            document.getElementById('transfer-gate').style.display = 'none';
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('sidebar').style.display = 'flex';
            jump('study');
        }, 1500);
    }

    function jump(id) {
        document.querySelectorAll('.window-layer').forEach(l => l.style.display = 'none');
        document.getElementById('layer-' + id).style.display = 'flex';
        if(id === 'shop') renderShop();
        update();
    }

    function renderShop() {
        const container = document.getElementById('shop-container');
        container.innerHTML = products.map(p => {
            const isOwned = state.items.includes(p.id);
            return `
                <div class="shop-item ${isOwned ? 'owned' : ''}">
                    <div style="font-size:3rem">${p.icon}</div>
                    <h3>${p.name}</h3>
                    <p>ğŸ® ${p.price}</p>
                    ${isOwned ? '<button class="btn" disabled>å·²åœ¨æ›´è¡£å®¤</button>' : `<button class="btn" onclick="buy('${p.id}', ${p.price})">è³¼è²·</button>`}
                </div>
            `;
        }).join('');
    }

    function buy(id, price) {
        if(state.coins >= price) {
            state.coins -= price;
            state.items.push(id);
            alert("ğŸ›’ è³¼è²·æˆåŠŸï¼å·²å‚³é€åˆ°æ›´è¡£å®¤ã€‚");
            renderShop();
            update();
        } else { alert("æ˜ç‡ˆä¸è¶³ï¼"); }
    }

    function startQuiz() {
        document.getElementById('lecture-area').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'block';
        document.getElementById('q-text').innerText = "ã€ç†ç§‘æŒ‘æˆ°ã€‘Bç´°èƒçš„ä¸»è¦åŠŸèƒ½ç‚ºä½•ï¼Ÿ";
        const ops = document.getElementById('options');
        ops.innerHTML = `
            <button class="opt-btn" onclick="ans(true)" style="width:100%; padding:15px; margin:5px;">ç”¢ç”ŸæŠ—é«”</button>
            <button class="opt-btn" onclick="ans(false)" style="width:100%; padding:15px; margin:5px;">æ¬é‹æ°§æ°£ (æ‰£é«”åŠ›)</button>
        `;
    }

    function ans(correct) {
        if(correct) {
            state.coins += 50;
            state.stamina = Math.min(10, state.stamina + 0.5); // åˆ·é¡Œè£œé«”åŠ›
            alert("âœ… æ­£ç¢ºï¼æ˜ç‡ˆ +50ï¼Œé«”åŠ›å¾®å¹…æ¢å¾©ã€‚");
            document.getElementById('correction-note').style.display = 'none';
        } else {
            state.stamina -= 2;
            document.getElementById('correction-note').style.display = 'block';
            alert("âŒ éŒ¯èª¤ï¼é«”åŠ›æ‰£é™¤ 2 é»ã€‚è«‹çœ‹ç­†è¨˜ç³¾éŒ¯ã€‚");
        }
        update();
    }

    function admin() {
        const p = prompt("å®ˆè­·è€…è­˜åˆ¥ï¼š");
        if(p === "æ±Ÿæ†¶å©·") { state.coins += 5000; update(); alert("ğŸ‘‘ ç®¡ç†è€…æ¬Šé™ï¼šæ˜ç‡ˆå……å€¼æˆåŠŸï¼"); }
    }

    function update() {
        document.getElementById('coin-val').innerText = Math.floor(state.coins);
        document.getElementById('sta-val').innerText = Math.max(0, Math.floor(state.stamina));
        document.getElementById('teacher-img').innerText = state.avatar;
    }
</script>
</body>
</html>
