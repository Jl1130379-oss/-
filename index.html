<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æ±Ÿå®¶æ™ºæ…§åŸå¸‚ 3.0 - æ——è‰¦ç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root { --main: #a5c3d9; --gold: #e6b8a2; --white: #ffffff; --bg: #f0f4f8; }
        * { box-sizing: border-box; font-family: "PingFang TC", sans-serif; }
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }

        /* èƒŒæ™¯èˆ‡é›ªèŠ± */
        #bg-layer { position: fixed; inset: 0; background: url('IMG_7210.jpg') center/cover; z-index: -1; filter: brightness(0.8); }
        .fixed-snow { position: fixed; font-size: 35px; color: #add8e6; cursor: pointer; z-index: 5000; filter: drop-shadow(0 0 10px white); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.6; } 50% { transform: scale(1.1); opacity: 1; } }

        /* å´é‚Šå°èˆª (IMG_7211 å„ªåŒ–) */
        #sidebar { position: fixed; left: 0; top: 0; bottom: 0; width: 260px; background: var(--white); display: none; flex-direction: column; z-index: 1000; box-shadow: 2px 0 10px rgba(0,0,0,0.1); }
        .nav-item { padding: 20px 25px; cursor: pointer; color: #444; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #f5f5f5; transition: 0.3s; }
        .nav-item:hover { background: #f0f7ff; color: var(--main); padding-left: 35px; }

        /* é ‚éƒ¨ç‹€æ…‹åˆ— */
        #hud { position: fixed; top: 20px; right: 20px; display: none; gap: 15px; z-index: 2000; }
        .stat-badge { background: rgba(255,255,255,0.9); padding: 10px 20px; border-radius: 50px; font-weight: bold; border: 1px solid var(--main); display: flex; align-items: center; gap: 10px; }

        /* è¦–çª—æ§åˆ¶ */
        .window-layer { position: fixed; left: 260px; inset: 0; background: var(--bg); display: none; flex-direction: column; padding: 40px; z-index: 500; overflow-y: auto; }
        
        /* è€å¸«å½¢è±¡å€ (å‹•æ…‹æ›è£) */
        .teacher-box { background: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; display: flex; align-items: center; gap: 20px; border: 2px solid var(--main); }
        .teacher-avatar { width: 80px; height: 80px; background: var(--main); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white; border: 3px solid var(--gold); }

        /* å•†å ´èˆ‡æ›´è¡£å®¤å¡ç‰‡ */
        .item-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; margin-top: 20px; }
        .card { background: white; padding: 20px; border-radius: 15px; text-align: center; border: 1px solid #eee; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .btn { width: 100%; padding: 10px; background: var(--main); color: white; border: none; border-radius: 8px; cursor: pointer; margin-top: 10px; }

        /* ç­”é¡Œç³»çµ± (IMG_7212) */
        .quiz-container { max-width: 600px; margin: 0 auto; text-align: center; }
        .opt-btn { width: 100%; padding: 18px; margin: 10px 0; background: white; border: 1px solid #ddd; border-radius: 12px; cursor: pointer; font-size: 1.1rem; }
        .opt-btn:hover { border-color: var(--main); background: #f0f7ff; }
    </style>
</head>
<body onload="update()">

<div id="bg-layer"></div>
<div class="fixed-snow" style="top: 10%; left: 5%;" onclick="admin()">â„ï¸</div>
<div class="fixed-snow" style="bottom: 5%; right: 5%;" onclick="admin()">â„ï¸</div>

<div id="auth-screen" style="position:fixed; inset:0; background:rgba(0,0,0,0.9); display:flex; align-items:center; justify-content:center; z-index:10000;">
    <div style="background:white; padding:50px; border-radius:30px; width:400px; text-align:center;">
        <h1 style="color:var(--main); margin-bottom:10px;">æ±Ÿå®¶æ™ºæ…§åŸå¸‚</h1>
        <p style="color:#666;">Version 3.0 æ­£å¼ç‰ˆ</p>
        <input type="text" id="username" style="width:100%; padding:15px; margin:30px 0; border:1px solid #ddd; border-radius:10px;" placeholder="è«‹è¼¸å…¥é€šè¡Œå§“å">
        <button class="btn" style="padding:15px;" onclick="login()">é–‹å•ŸåŸå¸‚å¤§é–€</button>
    </div>
</div>

<div id="sidebar">
    <div style="padding: 40px 25px; font-weight: 900; font-size: 1.4rem; color: var(--main);">æ±Ÿå®¶å°èˆª</div>
    <div class="nav-item" onclick="jump('study')"><i class="fas fa-graduation-cap"></i> æ±Ÿè€å¸«æ•™å®¤</div>
    <div class="nav-item" onclick="jump('shop')"><i class="fas fa-shopping-cart"></i> åŸå¸‚ç²¾å“å•†å ´</div>
    <div class="nav-item" onclick="jump('closet')"><i class="fas fa-magic"></i> ç§äººæ›´è¡£å®¤</div>
    <div class="nav-item" onclick="jump('yard')"><i class="fas fa-couch"></i> åº­é™¢å®¶å…·é…ç½®</div>
</div>

<div id="hud">
    <div class="stat-badge">âš¡ <span id="sta-val">10</span></div>
    <div class="stat-badge">ğŸ® <span id="coin-val">500</span></div>
</div>

<div id="layer-study" class="window-layer">
    <div class="teacher-box">
        <div class="teacher-avatar" id="current-avatar">ğŸ‘©â€ğŸ«</div>
        <div>
            <h3 style="margin:0">ç•¶å‰æˆèª²ï¼šæ±Ÿè€å¸«</h3>
            <p style="margin:5px 0 0; font-size:0.9rem; color:#888;">è£å‚™ä¸­ï¼š<span id="current-gear">é è¨­å¥—è£</span></p>
        </div>
    </div>
    <div class="quiz-container">
        <p style="color:#888">ç¢©åšé›£åº¦æŒ‘æˆ°</p>
        <h2 style="margin:30px 0;">ã€ç†ç§‘æ ¸å¿ƒã€‘é—œæ–¼äººé«”å…ç–«ç³»çµ±ï¼Œå“ªä¸€é …æ•˜è¿°æ˜¯æ­£ç¢ºçš„ï¼Ÿ</h2>
        <button class="opt-btn" onclick="ans(true)">æ­£ç¢ºç­”æ¡ˆï¼šBç´°èƒç”¢ç”ŸæŠ—é«”</button>
        <button class="opt-btn" onclick="ans(false)">éŒ¯èª¤é¸é …ï¼šç´…è¡€çƒè² è²¬æ¶ˆåŒ–</button>
        <div style="color:red; margin-top:20px; font-weight:bold;">âš–ï¸ ç­”éŒ¯æ‰£é™¤é«”åŠ›ï¼Œç­”å°ç²å¾—æ˜ç‡ˆ ğŸ®</div>
    </div>
</div>

<div id="layer-shop" class="window-layer">
    <h1>ç²¾å“å•†å ´</h1>
    <div class="item-grid">
        <div class="card"><i class="fas fa-crown" style="font-size:2rem; color:var(--gold)"></i><h3>é‘½çŸ³çš‡å† </h3><p>ğŸ® 300</p><button class="btn" onclick="buy('é‘½çŸ³çš‡å† ', 300, 'ğŸ‘‘')">è³¼è²·</button></div>
        <div class="card"><i class="fas fa-gem" style="font-size:2rem; color:var(--main)"></i><h3>æ¥µå…‰æŠ«è‚©</h3><p>ğŸ® 500</p><button class="btn" onclick="buy('æ¥µå…‰æŠ«è‚©', 500, 'âœ¨')">è³¼è²·</button></div>
        <div class="card"><i class="fas fa-bolt" style="font-size:2rem; color:orange"></i><h3>é«”åŠ›è—¥åŠ‘</h3><p>ğŸ® 50</p><button class="btn" onclick="buy('é«”åŠ›è—¥åŠ‘', 50, 'âš¡')">è³¼è²·</button></div>
    </div>
</div>

<div id="layer-closet" class="window-layer">
    <h1>ç§äººæ›´è¡£å®¤</h1>
    <div id="inventory" class="item-grid">
        </div>
</div>

<script>
    let state = { coins: 500, stamina: 10, items: [], equipped: 'é è¨­å¥—è£', avatar: 'ğŸ‘©â€ğŸ«' };

    function login() {
        if(!document.getElementById('username').value) return;
        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('sidebar').style.display = 'flex';
        document.getElementById('hud').style.display = 'flex';
        jump('study');
    }

    function jump(id) {
        document.querySelectorAll('.window-layer').forEach(l => l.style.display = 'none');
        document.getElementById('layer-' + id).style.display = 'flex';
        update();
    }

    function ans(correct) {
        if(state.stamina <= 0) { alert("é«”åŠ›ä¸è¶³ï¼Œè«‹åˆ·é¡Œåº«æ¢å¾©æˆ–è³¼è²·è—¥åŠ‘ï¼"); return; }
        if(correct) { state.coins += 100; alert("âœ… ç­”å°ï¼æ˜ç‡ˆ +100"); }
        else { state.stamina -= 2; alert("âŒ ç­”éŒ¯ï¼æ‰£é™¤ 2 é»é«”åŠ›ã€‚"); }
        // åˆ·é¡Œæ­£å‘æ¢å¾©æ©Ÿåˆ¶
        if(state.stamina < 10) state.stamina += 0.5;
        update();
    }

    function buy(name, price, icon) {
        if(state.coins >= price) {
            state.coins -= price;
            if(name === 'é«”åŠ›è—¥åŠ‘') { state.stamina = 10; alert("é«”åŠ›å·²è£œæ»¿ï¼"); }
            else {
                state.items.push({name, icon});
                renderCloset();
                alert(`ğŸ›ï¸ ${name} è³¼è²·æˆåŠŸï¼Œå·²æ”¾å…¥æ›´è¡£å®¤ï¼`);
            }
        } else { alert("æ˜ç‡ˆä¸è¶³ï¼"); }
        update();
    }

    function renderCloset() {
        const inv = document.getElementById('inventory');
        inv.innerHTML = state.items.map(i => `
            <div class="card">
                <div style="font-size:2rem">${i.icon}</div>
                <h4>${i.name}</h4>
                <button class="btn" onclick="equip('${i.name}', '${i.icon}')">ç©¿æˆ´ä¸Šèª²</button>
            </div>
        `).join('');
    }

    function equip(name, icon) {
        state.equipped = name;
        state.avatar = icon;
        document.getElementById('current-avatar').innerText = icon;
        document.getElementById('current-gear').innerText = name;
        alert(`æ±Ÿè€å¸«å·²æ›ä¸Šã€Œ${name}ã€ï¼Œç¾åœ¨å»ä¸Šèª²å§ï¼`);
    }

    function admin() {
        const p = prompt("æ±Ÿå®¶èªè­‰ï¼š");
        if(p === "æ±Ÿæ†¶å©·") { state.coins += 9999; update(); alert("ğŸ‘‘ ç®¡ç†è€…é‡‘åŠ›åŠ æŒï¼"); }
    }

    function update() {
        document.getElementById('coin-val').innerText = Math.floor(state.coins);
        document.getElementById('sta-val').innerText = Math.max(0, Math.floor(state.stamina));
    }
</script>
</body>
</html>
