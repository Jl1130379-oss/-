<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±Ÿå®¶æ™ºæ…§åŸå¸‚</title>
    <style>
        :root { --soft-bg: #fdfaf7; --wood: #8b5e3c; --leaf: #6b8e23; --gold: #d4af37; }
        * { box-sizing: border-box; font-family: "PingFang TC", "STHeiti", sans-serif; transition: 0.5s ease; }
        body { margin: 0; background: #222; color: #444; height: 100vh; overflow: hidden; }

        /* å…¥å£å ´æ™¯ï¼šä»¥è€å¸«åˆç…§ç‚ºèƒŒæ™¯ */
        #entry-screen {
            position: fixed; inset: 0; 
            background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('IMG_4393.jpg'); /* é€™è£¡è«‹æ›¿æ›ç‚ºå¦³çš„å§å¦¹åˆç…§æª”å */
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2000;
        }
        .start-btn {
            background: rgba(255,255,255,0.9); padding: 20px 50px; border-radius: 50px;
            font-size: 1.5rem; font-weight: bold; color: var(--wood); cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); border: 2px solid var(--wood);
        }

        /* ä¸»èˆå°ï¼šå®¶å®¤èˆ‡åº­é™¢ */
        #main-ui { display: none; height: 100vh; position: relative; background: var(--soft-bg); }
        .scene-bg { position: absolute; inset: 0; background-size: cover; background-position: center; z-index: 1; opacity: 0.8; }
        .bg-yard { background-image: url('åº­é™¢èƒŒæ™¯.jpg'); } /* åƒè€ƒåˆç…§ä¸­çš„ç¶ æ„èƒŒæ™¯ */
        .bg-home { background-image: url('å®¤å…§èƒŒæ™¯.jpg'); }

        /* å°å¸«ç«‹ç¹ªï¼šä¾ç…§åˆç…§äººç‰©å‰ªè£ */
        .teacher-layer { position: absolute; bottom: 0; width: 100%; display: flex; justify-content: space-around; z-index: 10; pointer-events: none; }
        .teacher-img { height: 85vh; cursor: pointer; pointer-events: auto; filter: drop-shadow(0 0 15px rgba(0,0,0,0.2)); }
        .teacher-img:hover { transform: scale(1.05); }

        /* å°èˆªé¸å–®ï¼šæº«é¦¨æœ¨è³ªé¢¨ */
        .nav-bar {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            display: flex; gap: 20px; z-index: 100; background: rgba(255,255,255,0.9);
            padding: 15px 30px; border-radius: 40px; border: 1px solid var(--wood);
        }
        .nav-item { font-size: 1.8rem; cursor: pointer; filter: grayscale(0.5); }
        .nav-item:hover { filter: grayscale(0); transform: translateY(-5px); }

        /* å¹£å€¼é¡¯ç¤º */
        .top-info { position: fixed; top: 30px; right: 30px; z-index: 100; font-size: 1.5rem; font-weight: bold; color: var(--wood); }

        /* å½ˆçª—ï¼šå•†å ´ã€è¡£æ«¥ã€å®¶å…· */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: none; align-items: center; justify-content: center; z-index: 5000; }
        .modal-content { background: #fffcf9; padding: 40px; border-radius: 30px; width: 600px; text-align: center; border: 3px solid var(--wood); }
        .item-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px; }
        .item-card { border: 1px solid #ddd; padding: 15px; border-radius: 20px; }
        .btn-action { background: var(--wood); color: white; border: none; padding: 10px 20px; border-radius: 10px; cursor: pointer; width: 100%; margin-top: 10px; }

        /* åº­é™¢å®¶å…·è£é£¾ */
        #yard-decor { position: absolute; inset: 0; z-index: 5; }
        .placed-item { position: absolute; font-size: 4rem; cursor: pointer; }

        /* é›ªèŠ±ç®¡ç†è€… */
        .admin-snow { position: fixed; top: 30px; left: 30px; font-size: 60px; cursor: pointer; opacity: 0.3; z-index: 6000; }
    </style>
</head>
<body>

<div id="entry-screen">
    <h1 style="color:white; text-shadow: 0 4px 10px rgba(0,0,0,0.5); font-size: 3rem; margin-bottom: 50px;">æ±Ÿå®¶æ™ºæ…§åŸå¸‚</h1>
    <div class="start-btn" onclick="startGame()">é»æ“Šé€²å…¥è€å¸«çš„å®¶</div>
</div>

<div id="main-ui">
    <div id="scene-img" class="scene-bg bg-yard"></div>
    <div id="yard-decor"></div>

    <div class="top-info">ğŸª™ <span id="coin-val">500</span></div>

    <div class="teacher-layer">
        <img src="IMG_3812.jpeg" class="teacher-img" onclick="talk('ling')" title="æ±Ÿéˆ´è€å¸«">
        <img src="IMG_4392.jpg" class="teacher-img" onclick="talk('yi')" title="æ±Ÿä¾è€å¸«">
    </div>

    <div class="nav-bar">
        <div class="nav-item" onclick="changeScene('yard')" title="åº­é™¢">ğŸ¡</div>
        <div class="nav-item" onclick="changeScene('home')" title="å®¢å»³">ğŸ›‹ï¸</div>
        <div class="nav-item" onclick="openModal('shop')" title="å®¶å…·å•†å ´">ğŸ›’</div>
        <div class="nav-item" onclick="openModal('closet')" title="æ›´è¡£å®¤">ğŸ‘š</div>
        <div class="nav-item" onclick="openModal('quiz')" title="ç­”é¡Œè³ºéŒ¢">ğŸ“</div>
    </div>
</div>

<div class="admin-snow" onclick="adminAccess()">â„ï¸</div>

<div id="modal-box" class="modal" onclick="closeModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <h2 id="modal-title"></h2>
        <div id="modal-body" class="item-grid"></div>
        <button onclick="closeModal()" style="margin-top:20px; border:none; background:#eee; padding:10px 20px; border-radius:10px;">è¿”å›</button>
    </div>
</div>

<script>
    let state = { coins: 500, isAdmin: false, currentScene: 'yard' };

    const shopItems = [
        { id: 'f1', name: 'å¯¦æœ¨é•·æ¤…', icon: 'ğŸª‘', price: 600 },
        { id: 'f2', name: 'å¾©å¤ç•™è²æ©Ÿ', icon: 'ğŸ“»', price: 1200 },
        { id: 'f3', name: 'åº­é™¢å°ç›†æ ½', icon: 'ğŸª´', price: 300 }
    ];

    function startGame() {
        document.getElementById('entry-screen').style.display = 'none';
        document.getElementById('main-ui').style.display = 'block';
    }

    function changeScene(s) {
        state.currentScene = s;
        document.getElementById('scene-img').className = 'scene-bg ' + (s === 'yard' ? 'bg-yard' : 'bg-home');
        alert(`å…©ä½è€å¸«ï¼šæ­¡è¿ä¾†åˆ°${s === 'yard' ? 'å®¶åº­é™¢' : 'å®¶å®¢å»³'}ï¼`);
    }

    function openModal(type) {
        const modal = document.getElementById('modal-box');
        const body = document.getElementById('modal-body');
        const title = document.getElementById('modal-title');
        modal.style.display = 'flex';
        body.innerHTML = '';

        if(type === 'shop') {
            title.innerText = 'ğŸ›’ æ±Ÿå®¶è£é£¾å•†å ´';
            shopItems.forEach(item => {
                let p = state.isAdmin ? item.price * 0.1 : item.price;
                body.innerHTML += `<div class="item-card">
                    <div style="font-size:3rem;">${item.icon}</div>
                    <b>${item.name}</b><br>
                    <button class="btn-action" onclick="buyFurniture('${item.icon}', ${p})">ğŸ’° ${p}</button>
                </div>`;
            });
        } else if(type === 'closet') {
            title.innerText = 'ğŸ‘š è€å¸«çš„æ›´è¡£å®¤';
            body.innerHTML = `<div class="item-card" style="grid-column: span 2;">
                <p>æ±Ÿä¾ï¼šå¦³æƒ³çœ‹å“ªä½è€å¸«æ›ä¸Šé‚£å¥—åˆç…§è£¡çš„å„ªé›…æœè£å‘¢ï¼Ÿ</p>
                <button class="btn-action" onclick="alert('æ›è£æˆåŠŸï¼')">è©¦ç©¿æ¥µå…‰é†«å­¸é•·è£™ (ğŸ’°2000)</button>
            </div>`;
        } else if(type === 'quiz') {
            title.innerText = 'ğŸ“ ç¿»é–±å­¸ç¿’ç­†è¨˜';
            body.innerHTML = `<div style="grid-column: span 2;">
                <p>æ±Ÿéˆ´ï¼šè«‹å•åˆç…§ä¸­æˆ‘å€‘èº«å¾Œçš„ç¶ æ¤æ˜¯å“ªç¨®é¡å‹çš„ï¼Ÿ</p>
                <button class="btn-action" onclick="earnMoney(200)">å¸¸ç¶ é—Šè‘‰æ— (æ­£ç¢ºé¸é …)</button>
            </div>`;
        }
    }

    function buyFurniture(icon, price) {
        if(state.coins >= price) {
            state.coins -= price;
            updateUI();
            const div = document.createElement('div');
            div.className = 'placed-item';
            div.innerText = icon;
            div.style.left = Math.random() * 80 + '%';
            div.style.top = Math.random() * 60 + 20 + '%';
            document.getElementById('yard-decor').appendChild(div);
            alert("æ±Ÿä¾ï¼šé€™å€‹å®¶å…·æ”¾é€™è£¡çœŸå¥½çœ‹ï¼");
            closeModal();
        } else alert("éŒ¢ä¸å¤ å–”ï¼Œå¿«å»ç­”é¡Œè³ºéŒ¢ï¼");
    }

    function earnMoney(amt) {
        state.coins += amt;
        updateUI();
        alert(`æ±Ÿéˆ´ï¼šç­”å°äº†ï¼çå‹µ ${amt} é‡‘å¹£ã€‚`);
        closeModal();
    }

    function adminAccess() {
        if(prompt("ç®¡ç†è€…å¯†ç¢¼ï¼š") === "æ±Ÿæ†¶å©·") {
            state.isAdmin = true;
            state.coins += 1000;
            updateUI();
            alert("ğŸ‘‘ ç®¡ç†è€…æ±Ÿæ†¶å©·ï¼Œå·²ç™¼æ”¾ 1000 å•Ÿå‹•é‡‘ï¼Œå•†å ´ 1 æŠ˜é–‹å•Ÿï¼");
        }
    }

    function updateUI() { document.getElementById('coin-val').innerText = (state.isAdmin ? "â„ï¸ " : "") + state.coins; }
    function closeModal() { document.getElementById('modal-box').style.display = 'none'; }
    function talk(name) { alert(name === 'ling' ? 'æ±Ÿéˆ´ï¼šä»Šå¤©æƒ³ä¸€èµ·æº«ç¿’åŠŸèª²å—ï¼Ÿ' : 'æ±Ÿä¾ï¼šå¦³çœ‹é€™æ£µæ¨¹ï¼Œæ˜¯æˆ‘å€‘ä¸€èµ·ç¨®ä¸‹çš„å–”ã€‚'); }
</script>
</body>
</html>
