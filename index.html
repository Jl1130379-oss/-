<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æ±Ÿå®¶æ™ºæ…§åŸå¸‚ | Lobby Core 3.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --neon-blue: #00f2fe; --neon-pink: #ff00de; --gold: #ffd700;
            --panel: rgba(6, 12, 28, 0.98);
        }
        * { box-sizing: border-box; font-family: "PingFang TC", sans-serif; cursor: crosshair; }
        body, html { margin: 0; padding: 0; height: 100%; background: #000; color: #fff; overflow: hidden; }

        /* å…¨å±€èƒŒæ™¯ */
        #master-bg {
            position: fixed; inset: 0;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1542332213-9b5a5a3fad35?w=1920');
            background-size: cover; background-position: center; z-index: -2;
        }

        /* è³½åšæ¡†ç·š */
        .hud-frame { position: fixed; inset: 15px; border: 2px solid var(--neon-blue); border-radius: 40px; box-shadow: 0 0 20px var(--neon-blue), inset 0 0 20px var(--neon-blue); pointer-events: none; z-index: 1000; }

        /* å´é‚Šå°èˆª (ä¸è·³é ) */
        #main-nav { position: fixed; left: 45px; top: 120px; display: flex; flex-direction: column; gap: 20px; z-index: 1100; }
        .nav-orb { width: 70px; height: 70px; border-radius: 20px; background: var(--panel); border: 1px solid var(--neon-blue); display: flex; align-items: center; justify-content: center; font-size: 26px; color: var(--neon-blue); transition: 0.4s; backdrop-filter: blur(10px); cursor: pointer; }
        .nav-orb.active { background: var(--neon-blue); color: #000; box-shadow: 0 0 30px var(--neon-blue); }

        /* è¦–çª—å®¹å™¨ */
        .viewport { position: fixed; left: 145px; right: 50px; top: 90px; bottom: 50px; background: var(--panel); border-radius: 35px; border: 1px solid rgba(0,242,254,0.3); display: none; padding: 40px; overflow-y: auto; backdrop-filter: blur(30px); }

        /* è€å¸«è‚–åƒ - æ¡ç”¨ç©©å®šå‹•æ¼« API */
        .teacher-box { display: flex; gap: 30px; margin-top: 20px; }
        .sprite { width: 300px; height: 450px; border: 2px solid var(--neon-blue); border-radius: 25px; background-size: cover; background-position: center; position: relative; box-shadow: 0 0 20px var(--neon-blue); }
        .sprite::after { content: ""; position: absolute; inset: 0; background: linear-gradient(transparent, #000); border-radius: 23px; }
        .sprite-name { position: absolute; bottom: 20px; width: 100%; text-align: center; z-index: 2; font-weight: 900; letter-spacing: 2px; }

        /* èŠå¤©å®¤ */
        .chat-area { height: 400px; overflow-y: auto; background: rgba(0,0,0,0.4); padding: 20px; border-radius: 20px; display: flex; flex-direction: column; gap: 10px; border: 1px solid rgba(255,255,255,0.05); }
        .msg { max-width: 80%; padding: 12px 18px; border-radius: 15px; line-height: 1.5; }
        .msg.teacher { background: rgba(0,242,254,0.1); border-left: 4px solid var(--neon-blue); align-self: flex-start; }
        .msg.user { background: rgba(255,255,255,0.05); align-self: flex-end; }

        /* å•†å ´æ ¼æŸµ */
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .shop-item { background: rgba(255,255,255,0.03); padding: 20px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.05); text-align: center; }

        /* é›ªèŠ±é–‹é—œ */
        #admin-snow { position: fixed; bottom: 35px; right: 35px; font-size: 45px; color: var(--neon-blue); cursor: pointer; z-index: 2000; filter: drop-shadow(0 0 10px var(--neon-blue)); }
    </style>
</head>
<body onload="bootSystem()">

<div id="master-bg"></div>
<div class="hud-frame"></div>
<div id="admin-snow" onclick="adminLogin()"><i class="fas fa-snowflake"></i></div>

<div style="position:fixed; top:40px; right:75px; z-index:1100; display:flex; gap:30px;">
    <div style="background:var(--panel); border:1px solid var(--neon-blue); padding:12px 30px; border-radius:50px; box-shadow: 0 0 15px var(--neon-blue);">
        <i class="fas fa-bolt" style="color:var(--neon-blue)"></i> <span id="val-sta">10</span>
        <span style="margin:0 15px; opacity:0.3">|</span>
        <i class="fas fa-coins" style="color:var(--gold)"></i> <span id="val-coin">0</span>
    </div>
</div>

<div id="main-nav">
    <div class="nav-orb active" id="nav-lobby" onclick="show('lobby')"><i class="fas fa-home"></i></div>
    <div class="nav-orb" id="nav-study" onclick="show('study')"><i class="fas fa-brain"></i></div>
    <div class="nav-orb" id="nav-chat" onclick="show('chat')"><i class="fas fa-heart"></i></div>
    <div class="nav-orb" id="nav-shop" onclick="show('shop')"><i class="fas fa-store"></i></div>
</div>

<div id="view-lobby" class="viewport">
    <h1 style="color:var(--neon-blue); letter-spacing:8px;">æ±Ÿå®¶æ§åˆ¶å¤§å»³ | LOBBY</h1>
    <div class="teacher-box">
        <div class="sprite" style="background-image:url('https://api.dicebear.com/7.x/adventurer/svg?seed=Ling&hairColor=2c1b18')">
            <div class="sprite-name">æ±Ÿéˆ´ | æµå‹•æ¥µå…‰è£™</div>
        </div>
        <div class="sprite" style="background-image:url('https://api.dicebear.com/7.x/adventurer/svg?seed=Yi&hairColor=402020')">
            <div class="sprite-name">æ±Ÿä¾ | è½æ«»ç¹½ç´›æ¼¢æœ</div>
        </div>
        <div style="flex:1; background:rgba(255,255,255,0.03); border-radius:25px; padding:30px; border:1px solid rgba(0,242,254,0.1);">
            <h2 style="color:var(--gold)">ç®¡ç†ç³»çµ±æ—¥èªŒ</h2>
            <p>â— æ­¡è¿ï¼Œæ±Ÿç®¡ç†å“¡ã€‚ç³»çµ±å·²é–å®š 2026 èª²ç¨‹æ¨¡å¼ã€‚</p>
            <p>â— å•†åŸç‰¹æƒ å·²é–‹å•Ÿï¼šå…¨å ´ 1 æŠ˜ã€‚</p>
            <p>â— æ‚¨å¯ä»¥é»æ“Šé›ªèŠ±é€²è¡Œèº«ä»½èªè­‰ã€‚</p>
        </div>
    </div>
</div>

<div id="view-study" class="viewport">
    <h1 id="q-lvl" style="color:var(--neon-blue)">åŠ è¼‰ä¸­...</h1>
    <div id="timer-wrap" style="color:var(--neon-pink); font-weight:bold; font-size:1.2rem; margin:10px 0;"></div>
    <div style="background:rgba(255,255,255,0.05); padding:40px; border-radius:30px; border:1px solid var(--neon-blue);">
        <h2 id="q-text" style="font-size:2rem;">æ­£åœ¨ç”Ÿæˆé¡Œç›®...</h2>
        <div id="q-options" style="display:grid; gap:15px; margin-top:30px;"></div>
    </div>
</div>

<div id="view-chat" class="viewport">
    <h1 style="color:var(--neon-blue)">æ±Ÿå®¶ç§äººç¾¤èŠ</h1>
    <div id="chat-disp" class="chat-area"></div>
    <div style="margin-top:20px; display:flex; gap:15px;">
        <input type="text" id="chat-in" style="flex:1; background:transparent; border:1px solid var(--neon-blue); padding:15px; border-radius:12px; color:#fff;" placeholder="èˆ‡è€å¸«å°è©±...">
        <button onclick="sendChat()" style="background:var(--neon-blue); border:none; padding:15px 30px; border-radius:12px; color:#000; font-weight:bold; cursor:pointer;">ç™¼é€</button>
    </div>
</div>

<div id="view-shop" class="viewport">
    <h1 style="color:var(--neon-blue)">è¬ç‰©ç²¾å“å•†å ´ (10000+ å“é …)</h1>
    <div class="shop-grid" id="shop-box"></div>
</div>

<script>
    let state = { coin: 500, sta: 10, adminClaimed: false };
    let timer;

    function bootSystem() { show('lobby'); updateUI(); addChat("æ±Ÿéˆ´", "æ±Ÿç®¡ç†å“¡ï¼Œæ§åˆ¶å¤§å»³å·²æº–å‚™å°±ç·’ã€‚"); }

    function show(id) {
        document.querySelectorAll('.viewport').forEach(v => v.style.display = 'none');
        document.querySelectorAll('.nav-orb').forEach(n => n.classList.remove('active'));
        document.getElementById('view-' + id).style.display = 'block';
        document.getElementById('nav-' + id).classList.add('active');
        if(id === 'shop') renderShop();
        if(id === 'study') nextQuiz();
    }

    // å•†å ´ä¿®å¾©èˆ‡ç”Ÿæˆ
    function renderShop() {
        const box = document.getElementById('shop-box');
        let html = "";
        for(let i=1; i<=100; i++) { // ç¤ºç¯„ 100 ä»¶ï¼Œå¯æ»¾å‹•
            html += `<div class="shop-item">
                <div style="font-size:40px;">ğŸ</div>
                <h4>å®¶å…·/æœé£¾ #${i}</h4>
                <p style="color:var(--neon-blue)">ğŸ® <s>1000</s> 100</p>
                <button onclick="buy()" style="background:var(--neon-blue); border:none; border-radius:5px; padding:5px 10px; cursor:pointer;">è³¼è²·</button>
            </div>`;
        }
        box.innerHTML = html;
    }

    function buy() {
        if(state.coin >= 100) { state.coin -= 100; updateUI(); alert("åŒæ­¥è³¼è²·æˆåŠŸï¼å·²å­˜å…¥æ±Ÿå®¶ç›¸ç°¿ã€‚"); }
        else { alert("æ˜ç‡ˆä¸è¶³ï¼"); }
    }

    // ç®¡ç†å“¡èªè­‰ (è§£æ±ºé‡è¤‡é ˜å–èˆ‡è¼¸ä¸å‡ºçš„å•é¡Œ)
    function adminLogin() {
        if(state.adminClaimed) {
            alert("âš ï¸ ç®¡ç†å“¡èº«ä»½å·²ç¢ºèªï¼Œè³‡æºå·²åœ¨å¸³æˆ¶å…§ï¼Œä¸å¯é‡è¤‡é ˜å–ã€‚");
            return;
        }
        if(prompt("è«‹è¼¸å…¥ç®¡ç†å“¡é‡‘é‘°ï¼š") === "æ±Ÿæ†¶å©·") {
            state.coin += 10000;
            state.adminClaimed = true;
            updateUI();
            addChat("æ±Ÿä¾", "ç®¡ç†å“¡ï¼Œ10000 æ˜ç‡ˆå·²åŒæ­¥è‡³æ‚¨çš„æ ¸å¿ƒå¸³æˆ¶ã€‚");
            alert("ğŸ‘‘ èªè­‰æˆåŠŸï¼10000 æ˜ç‡ˆå·²å…¥å¸³ã€‚");
        }
    }

    // èª²ç¨‹é‚è¼¯ (åœ‹å°3åˆ† / å¤§å­¸ç„¡é™)
    const db = [
        { lvl: 'åœ‹å°', t: 'ã€Œå­¸è€Œä¸æ€å‰‡ç½”ã€çš„ä¸‹ä¸€å¥æ˜¯ï¼Ÿ', o: ['æ€è€Œä¸å­¸å‰‡æ®†','å­¸è€Œæ™‚ç¿’ä¹‹','ä¸çŸ¥ç‚ºä¸çŸ¥'], a: 0, time: 180 },
        { lvl: 'åšå£«', t: 'é—œæ–¼é»‘æ´ç†µçš„ Bekenstein-Hawking å…¬å¼ï¼Œç†µèˆ‡ä»€éº¼æˆæ­£æ¯”ï¼Ÿ', o: ['è¡¨é¢ç©','é«”ç©','è³ªé‡'], a: 0, time: 0 }
    ];

    function nextQuiz() {
        clearInterval(timer);
        const q = db[Math.floor(Math.random()*db.length)];
        document.getElementById('q-lvl').innerText = q.lvl + "èª²ç¨‹é›£åº¦";
        document.getElementById('q-text').innerText = q.t;
        document.getElementById('q-options').innerHTML = q.o.map((o,i) => `<button onclick="ans(${i===q.a})" style="padding:20px; background:rgba(255,255,255,0.05); border:1px solid var(--neon-blue); color:#fff; border-radius:10px; cursor:pointer; text-align:left;">${o}</button>`).join('');
        
        if(q.time > 0) startClock(q.time);
        else document.getElementById('timer-wrap').innerText = "æ€è€ƒæ™‚é–“ï¼šâˆ (å¤§å­¸ä»¥ä¸Šç«¶è³½ç´š)";
    }

    function startClock(s) {
        let r = s;
        timer = setInterval(() => {
            r--;
            document.getElementById('timer-wrap').innerText = `å‰©é¤˜æ™‚é–“ï¼š${Math.floor(r/60)}:${(r%60).toString().padStart(2,'0')}`;
            if(r <= 0) { clearInterval(timer); ans(false); }
        }, 1000);
    }

    function ans(c) {
        if(c) { state.coin += 300; alert("âœ¨ è§£ææ­£ç¢ºï¼ç²å¾— 300 æ˜ç‡ˆã€‚"); }
        else { state.sta -= 2; alert("âŒ é‚è¼¯éŒ¯èª¤ã€‚é«”åŠ›æ‰£é™¤ 2ã€‚"); }
        updateUI(); nextQuiz();
    }

    // èŠå¤©é‚è¼¯
    function addChat(sender, text) {
        const d = document.getElementById('chat-disp');
        const div = document.createElement('div');
        div.className = sender === "å¦³" ? "msg user" : "msg teacher";
        div.innerHTML = `<strong>${sender}:</strong> ${text}`;
        d.appendChild(div);
        d.scrollTop = d.scrollHeight;
    }

    function sendChat() {
        const i = document.getElementById('chat-in');
        if(!i.value) return;
        addChat("å¦³", i.value);
        const v = i.value; i.value = "";
        setTimeout(() => {
            if(v.includes("èª²ç¨‹")) addChat("æ±Ÿéˆ´", "èª²ç¨‹ç³»çµ±å·²æ ¡æº–è‡³ 2026 ç‰ˆï¼Œéš¨æ™‚å¯ä»¥é–‹å§‹ã€‚");
            else if(v.includes("ç®¡ç†å“¡")) addChat("æ±Ÿä¾", "ç®¡ç†å“¡æœ‰ä½•å©å’ï¼Ÿæˆ‘å€‘æœƒå…¨ç¨‹å”åŠ©ã€‚");
            else addChat("æ±Ÿéˆ´", "æ”¶åˆ°ï¼Œæ•¸æ“šå·²åŒæ­¥è‡³æ±Ÿå®¶é›²ç«¯ã€‚");
        }, 800);
    }

    function updateUI() {
        document.getElementById('val-sta').innerText = state.sta;
        document.getElementById('val-coin').innerText = state.coin;
    }
</script>
</body>
</html>
